
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>í”ë“¤ê°ˆëŒ€</title>
<style>
  body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    background-color: #f0f0f0;
  }
  #password-screen {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #4a665b;
    color: #fff;
  }
  #password-screen input {
    padding: 10px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    margin-top: 10px;
  }
  #main-content {
    display: none;
  }
</style>
</head>
<body>

<div id="password-screen">
  <form id="password-form" onsubmit="return checkPassword(event)" style="display: flex; flex-direction: column; align-items: center;">
    <h2 style="font-size: 24px; margin-bottom: 20px;">ğŸ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</h2>
    <input type="password" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" style="padding: 12px; font-size: 18px; border-radius: 8px; border: 1px solid #ccc; width: 250px;" required>
    <button type="submit" style="margin-top: 15px; padding: 10px 20px; font-size: 16px; border: none; border-radius: 8px; background-color: #8fa88e; color: white; cursor: pointer;">ì…ì¥</button>
    <p id="error-msg" style="color: #ffdddd; margin-top: 12px;"></p>
  </form>
</div>

  <p id="error-msg" style="color: pink; margin-top: 10px;"></p>
</div>
<div id="main-content">
<!DOCTYPE html>

<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>í”ë“¤ê°ˆëŒ€ HOME</title>
<style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, 'Nanum Gothic', sans-serif;
        }
        
        body {
            background-color: #d7d5cb;
            color: #2c3e50;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.15);
            border-radius: 8px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        header {
            background-color: #5f7561;
            color: white;
            padding: 30px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(95, 117, 97, 0.7);
            z-index: 1;
        }
        
        header h1, header p {
            position: relative;
            z-index: 2;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        nav {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            background-color: #34403a;
            padding: 12px;
            border-radius: 8px;
            flex-wrap: wrap;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 10px 18px;
            margin: 5px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        nav a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .active {
            background-color: #9ab39c;
            color: #34403a;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .tab-content.active {
            display: block;
        }
        
        h2 {
            color: #34403a;
            margin-bottom: 20px;
        }
        
        /* ì¼ê¸°ì¥ ìŠ¤íƒ€ì¼ */
        .diary-entry {
            background-color: #f9f9f9;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            border-left: 4px solid #9ab39c;
        }
        
        .diary-date {
            font-weight: bold;
            color: #5f7561;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }
        
        .diary-content {
            white-space: pre-wrap;
            line-height: 1.7;
        }
        
        .diary-meta {
            margin-top: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: #888;
            padding-top: 10px;
            border-top: 1px solid #eee;
        }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        button {
            background-color: #5f7561;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 5px;
        }
        
        button:hover {
            background-color: #34403a;
        }
        
        button.delete-btn {
            background-color: #e74c3c;
        }
        
        /* í¼ ìŠ¤íƒ€ì¼ */
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        
        /* í• ì¼ ìŠ¤íƒ€ì¼ */
        .todo-item {
            background-color: #f9f9f9;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #9ab39c;
        }
        
        .todo-text {
            flex: 1;
            display: flex;
            align-items: center;
        }
        
        .todo-text input[type="checkbox"] {
            margin-right: 10px;
        }
        
        /* ë‹¬ë ¥ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .calendar-table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed; /* ì¹¸ í¬ê¸° ê³ ì • */
        }
        
        .calendar-table th {
            background-color: #f0f0f0;
            padding: 8px;
            border: 1px solid #ddd;
        }
        
        .calendar-table td {
            border: 1px solid #ddd;
            height: 80px; /* ê³ ì • ë†’ì´ */
            vertical-align: top;
            position: relative;
            width: 14.28%; /* ëª¨ë“  ì—´ì˜ ë„ˆë¹„ë¥¼ ë™ì¼í•˜ê²Œ */
            overflow: hidden; /* ë‚´ìš©ì´ ë„˜ì¹˜ë©´ ìˆ¨ê¹€ */
        }
        
        .calendar-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0;
        }
        
        .calendar-title {
            font-weight: bold;
        }
        
        .day-number {
            font-weight: bold;
            margin-bottom: 5px;
            display: block;
        }
        
/* ì²´ì¤‘ ê¸°ë¡ ì¤‘ì•™ ì •ë ¬ ìŠ¤íƒ€ì¼ */
.weight-entry {
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 16px;
    font-weight: bold;
    color: #3b82f6;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(235, 245, 251, 0.7);
    padding: 4px 8px;
    border-radius: 5px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    z-index: 2;
}

/* ë‹¬ë ¥ ì…€ ìœ„ì¹˜ ê´€ë ¨ ì„¤ì • */
.calendar-table td {
    border: 1px solid #ddd;
    height: 80px;
    vertical-align: top;
    position: relative;
    width: 14.28%;
    overflow: visible; /* ì²´ì¤‘ í‘œì‹œê°€ ì˜ë¦¬ì§€ ì•Šë„ë¡ ë³€ê²½ */
}

        /* í• ì¼ ë‹¬ë ¥ ìŠ¤íƒ€ì¼ */
        .todo-entry {
            display: flex;
            align-items: center;
            font-size: 12px;
            margin-top: 4px;
            max-width: 100%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .todo-entry input[type="checkbox"] {
            margin-right: 4px;
            flex-shrink: 0;
        }
        
        .todo-text.completed {
            text-decoration: line-through;
            color: #888;
        }
        
        /* ìŠ¤ì¼€ì¤„ ê´€ë¦¬ ìŠ¤íƒ€ì¼ */
        .schedule {
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }
        
        .schedule table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            border-radius: 5px;
        }
        
        .schedule th, .schedule td {
            border: 1px solid #e0e0e0;
            padding: 14px;
            text-align: left;
        }
        
        .schedule th {
            background-color: #9ab39c;
            color: white;
            font-weight: 500;
        }
        
        .schedule tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .schedule tr:hover {
            background-color: #d7d5cb;
        }
        
        .schedule-form {
            margin-top: 25px;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #9ab39c;
        }
        
        /* ìŠ¤ì¼€ì¤„ ë³´ê¸° ë°©ì‹ */
        .schedule-view-options {
            margin-top: 35px;
        }
        
        .view-options {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .view-option {
            background-color: #d7d5cb;
            border: 1px solid #d0d5d1;
            color: #34403a;
            padding: 10px 18px;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
            font-weight: 500;
        }
        
        .view-option.active {
            background-color: #5f7561;
            color: white;
            border-color: #5f7561;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        }
        
        .schedule-view {
            display: none;
        }
        
        .schedule-view.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ë‹¬ë ¥ ìŠ¤íƒ€ì¼ */
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background-color: #9ab39c;
            padding: 15px;
            border-radius: 8px 8px 0 0;
            color: white;
        }
        
        .calendar-header button {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .calendar-header button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .calendar-grid {
            border: 1px solid #e0e0e0;
            border-radius: 0 0 8px 8px;
            overflow: hidden;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.05);
        }
        
        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            background-color: #d7d5cb;
            font-weight: bold;
        }
        
        .day-name {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .calendar-dates {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            grid-auto-rows: minmax(120px, auto);
            background-color: white;
        }
        
        .calendar-day {
            border: 1px solid #e0e0e0;
            padding: 8px;
            min-height: 120px;
            background-color: white;
            position: relative;
            transition: all 0.2s;
        }
        
        .calendar-day:hover {
            background-color: #f9f9f9;
            transform: scale(1.02);
            z-index: 5;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .day-number {
            position: absolute;
            top: 8px;
            right: 8px;
            font-weight: bold;
            color: #34403a;
        }
        
        .calendar-day.today {
            background-color: #e8f4f1;
            border: 2px solid #9ab39c;
        }
        
        .calendar-day.other-month {
            background-color: #f9f9f9;
            color: #bbb;
        }
        
        .calendar-day.selected {
            background-color: #f5f0e5;
            border: 2px solid #e3b587;
        }
        
        .calendar-day.has-events {
            position: relative;
        }
        
        .calendar-day.has-events::after {
            content: "";
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #e3b587;
            border-radius: 50%;
            top: 8px;
            left: 8px;
            box-shadow: 0 0 5px rgba(227, 181, 135, 0.7);
        }
        
        .event-list {
            margin-top: 25px;
            font-size: 0.85rem;
            overflow: hidden;
        }
        
        .event-item {
            background-color: #5f7561;
            color: white;
            padding: 4px 8px;
            margin-bottom: 3px;
            border-radius: 3px;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }
        
        .event-item:hover {
            transform: translateX(3px);
            background-color: #34403a;
        }
        
        .event-details {
            margin-top: 25px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.05);
        }
        
        .event-day-item {
            background-color: white;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
            border-left: 4px solid #9ab39c;
            transition: all 0.2s;
        }
        
        .event-day-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .event-time {
            font-weight: bold;
            color: #5f7561;
            margin-bottom: 5px;
        }
        
        .no-events {
            font-style: italic;
            color: #999;
            text-align: center;
            padding: 15px;
        }
        
        /* ê°€ê³„ë¶€ ìŠ¤íƒ€ì¼ */
        .accountbook {
            margin-bottom: 30px;
        }
        
        .accountbook-form {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #9ab39c;
        }
        
        .accountbook-list {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .accountbook-list th {
            background-color: #eef;
            padding: 10px;
            text-align: left;
        }
        
        .accountbook-list td {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .accountbook-list tr:hover {
            background-color: #f5f5f5;
        }
        
        .accountbook-summary {
            margin: 20px 0;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        
        .chart-container {
            background-color: #fdfdfd;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 5px rgba(0,0,0,0.05);
            margin: 20px auto;
            max-width: 650px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            background-color: #34403a;
            color: white;
            border-radius: 8px;
        }

        /* í—¤ë” ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
        .header-image {
            position: relative;
            z-index: 2;
            max-width: 100%;
            height: auto;
            margin-top: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body onload="loadInitialData()">
<!-- ë©”ì¸ ì»¨í…ì¸  -->
<div class="container">
<header><img src="logo.png" style="height: 60px; margin-bottom: 10px;"/>

<p id="preview-text">í—›ë˜ì´ ë³´ë‚¸ ì˜¤ëŠ˜ì€, ì£½ì€ì´ê°€ ê·¸í† ë¡ ë°”ë¼ë˜ ë‚´ì¼ì´ì—ˆë‹¤</p>
<audio autoplay="" hidden="" id="bgm" loop="" src="bgm.mp3"></audio>
</header>
<nav>
<a class="nav-link active" href="#" onclick="showTab('home')">HOME</a>
<a class="nav-link" href="#" onclick="showTab('schedule')">ìŠ¤ì¼€ì¤„</a>
<a class="nav-link" href="#" onclick="showTab('diary')">ê¸°ë¡</a>
<a class="nav-link" href="#" onclick="showTab('memo')">ë©”ëª¨</a>
<a class="nav-link" href="#" onclick="showTab('todo')">ë­í•´?</a>
<a class="nav-link" href="#" onclick="showTab('weight')">ê·¸ë§Œë¨¹ì–´</a>
<a class="nav-link" href="#" onclick="showTab('accountbook')">ê·¸ë§Œì¨</a>

</nav>
<!-- íƒ­ ì»¨í…ì¸  -->
<div class="tab-content active" id="home"><div style="text-align: center; margin-top: 20px;"><video autoplay="True" loop="True" muted="True" style="width: 40%; height: auto; border-radius: 12px; box-shadow: 0 0 20px rgba(0,0,0,0.2);"><source src="video.mp4" type="video/mp4"/>ë™ì˜ìƒì„ ì¬ìƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</video></div></div>
<!-- ìŠ¤ì¼€ì¤„ íƒ­ -->
<div class="tab-content" id="schedule">
<h2>ë‚´ ìŠ¤ì¼€ì¤„</h2>
<div class="schedule">
<div class="schedule-form">
<h3>ìƒˆ ì¼ì • ì¶”ê°€</h3>
<div class="form-group">
<label for="eventTitle">ì œëª©</label>
<input id="eventTitle" placeholder="ì¼ì • ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" type="text"/>
</div>
<div class="form-group">
<label for="eventDate">ë‚ ì§œ</label>
<input id="eventDate" type="date"/>
</div>
<div class="form-group">
<label for="eventTime">ì‹œê°„</label>
<input id="eventTime" type="time"/>
</div>
<div class="form-group">
<label for="eventDescription">ìƒì„¸ ë‚´ìš©</label>
<textarea id="eventDescription" placeholder="ì¼ì •ì— ëŒ€í•œ ìƒì„¸ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" rows="3"></textarea>
</div>
<button id="addScheduleBtn">ì¼ì • ì¶”ê°€</button>
</div>
<!-- ìŠ¤ì¼€ì¤„ ë³´ê¸° ë°©ì‹ ì„ íƒ -->
<div class="schedule-view-options">
<h3>ì¼ì • ë³´ê¸°</h3>
<div class="view-options">
<button class="view-option active" id="viewListBtn">ë¦¬ìŠ¤íŠ¸ í˜•ì‹</button>
<button class="view-option" id="viewCalendarBtn">ë‹¬ë ¥ í˜•ì‹</button>
</div>
</div>
<!-- ë¦¬ìŠ¤íŠ¸ í˜•ì‹ ë³´ê¸° -->
<div class="schedule-view active" id="listView">
<h3>ë‹¤ê°€ì˜¤ëŠ” ì¼ì •</h3>
<table id="scheduleTable">
<thead>
<tr>
<th>ë‚ ì§œ</th>
<th>ì‹œê°„</th>
<th>ì œëª©</th>
<th>ìƒì„¸ ë‚´ìš©</th>
<th>ì‘ì—…</th>
</tr>
</thead>
<tbody>
<!-- ì¼ì • í•­ëª©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
</tbody>
</table>
</div>
<!-- ë‹¬ë ¥ í˜•ì‹ ë³´ê¸° -->
<div class="schedule-view" id="calendarView">
<div class="calendar-header">
<button id="prevMonthBtn">&lt;</button>
<h3 id="currentMonthYear">2025ë…„ 4ì›”</h3>
<button id="nextMonthBtn">&gt;</button>
</div>
<div class="calendar-grid">
<div class="calendar-days">
<div class="day-name">ì¼</div>
<div class="day-name">ì›”</div>
<div class="day-name">í™”</div>
<div class="day-name">ìˆ˜</div>
<div class="day-name">ëª©</div>
<div class="day-name">ê¸ˆ</div>
<div class="day-name">í† </div>
</div>
<div class="calendar-dates" id="calendarDays">
<!-- ë‹¬ë ¥ ë‚ ì§œê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
</div>
</div>
<div class="event-details" id="eventDetails">
<h3>ì¼ì • ìƒì„¸ ì •ë³´</h3>
<div id="selectedDateEvents">
<!-- ì„ íƒëœ ë‚ ì§œì˜ ì¼ì •ì´ í‘œì‹œë©ë‹ˆë‹¤ -->
<p class="no-events">ë‚ ì§œë¥¼ ì„ íƒí•˜ë©´ ì¼ì •ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>
</div>
</div>
</div>
</div>
</div>
<!-- ê¸°ë¡(ì¼ê¸°) íƒ­ -->
<div class="tab-content" id="diary">
<h2>ì¼ê¸°ì¥</h2>
<div class="form-group">
<label for="diaryDate">ë‚ ì§œ</label>
<input id="diaryDate" type="date"/>
</div>
<div class="form-group">
<label for="diaryContent">ë‚´ìš©</label>
<textarea id="diaryContent" placeholder="ì˜¤ëŠ˜ì˜ ì¼ê¸°ë¥¼ ì‘ì„±í•˜ì„¸ìš”..." rows="6"></textarea>
</div>
<button onclick="saveDiary()">ì €ì¥</button>
<h3 style="margin-top: 30px;">ë‚´ ì¼ê¸° ëª©ë¡</h3>
<div id="diaryEntries">
<!-- ì¼ê¸° í•­ëª©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
</div>
</div>
<!-- ë©”ëª¨ íƒ­ -->
<div class="tab-content" id="memo">
<h2>ë©”ëª¨ì¥</h2>
<div class="form-group">
<label for="memoTitle">ì œëª©</label>
<input id="memoTitle" placeholder="ë©”ëª¨ ì œëª©" type="text"/>
</div>
<div class="form-group">
<label for="memoContent">ë‚´ìš©</label>
<textarea id="memoContent" placeholder="ë©”ëª¨ ë‚´ìš©ì„ ì‘ì„±í•˜ì„¸ìš”..." rows="4"></textarea>
</div>
<button onclick="saveMemo()">ì €ì¥</button>
<h3 style="margin-top: 30px;">ë‚´ ë©”ëª¨ ëª©ë¡</h3>
<div id="memoList">
<!-- ë©”ëª¨ í•­ëª©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
</div>
</div>
<!-- í• ì¼ íƒ­ (ì´ë¦„ ë³€ê²½: í• ì¼ -> ë­í•´?) -->
<div class="tab-content" id="todo">
<h2>ë­í•´? (í•  ì¼ ëª©ë¡)</h2>
<div class="form-group" style="display: flex; gap: 10px;">
<input id="todoInput" placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”" style="flex: 1;" type="text"/>
<button onclick="addTodo()" style="width: auto;">ì¶”ê°€</button>
</div>
<div id="editTodoForm" style="display: none; background-color: #d7d5cb; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
<h3 style="margin-top: 0;">í•  ì¼ ìˆ˜ì •</h3>
<div class="form-group">
<input id="editTodoInput" type="text"/>
<input id="editTodoId" type="hidden"/>
</div>
<div style="display: flex; justify-content: flex-end; gap: 10px;">
<button onclick="updateTodo()">ìˆ˜ì • ì™„ë£Œ</button>
<button onclick="cancelEdit()" style="background-color: #95a5a6;">ì·¨ì†Œ</button>
</div>
</div>
<div id="todoList" style="margin-top: 20px;">
<!-- í•  ì¼ í•­ëª©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
</div>
<h3 style="margin-top: 30px;">ë‹¬ë ¥ ë³´ê¸° (ê°„ë‹¨ í‘œì‹œ)</h3>
<div class="calendar-nav">
<button onclick="prevTodoMonth()">â—€ ì´ì „ë‹¬</button>
<span class="calendar-title" id="todoCalendarHeader"></span>
<button onclick="nextTodoMonth()">ë‹¤ìŒë‹¬ â–¶</button>
</div>
<table class="calendar-table" id="todoCalendarTable">
<thead>
<tr>
<th>ì¼</th><th>ì›”</th><th>í™”</th><th>ìˆ˜</th><th>ëª©</th><th>ê¸ˆ</th><th>í† </th>
</tr>
</thead>
<tbody id="todoCalendarBody"></tbody>
</table>
</div>
<!-- ì²´ì¤‘ ê¸°ë¡ íƒ­ -->
<div class="tab-content" id="weight">
<h2>âš–ï¸ ì²´ì¤‘ ê¸°ë¡</h2>
<div id="weightArea">
<div class="form-group" style="display: flex; flex-wrap: wrap; align-items: center; gap: 12px; margin-bottom: 20px;">
<label for="weightDate">ë‚ ì§œ</label>
<input id="weightDate" required="" type="date"/>
<label for="weightValue">ì²´ì¤‘ (kg)</label>
<input id="weightValue" required="" step="0.1" type="number"/>
<button onclick="saveWeight()">ê¸°ë¡í•˜ê¸°</button>
</div>
<h3>ğŸ“… ë‹¬ë ¥ ë³´ê¸°</h3>
<div class="calendar-nav">
<button onclick="prevWeightMonth()">â—€ ì´ì „ ë‹¬</button>
<div class="calendar-title" id="calendarTitle">2025ë…„ 4ì›”</div>
<button onclick="nextWeightMonth()">ë‹¤ìŒ ë‹¬ â–¶</button>
</div>
<table class="calendar-table" id="weightCalendarTable">
<thead>
<tr>
<th>ì¼</th><th>ì›”</th><th>í™”</th><th>ìˆ˜</th><th>ëª©</th><th>ê¸ˆ</th><th>í† </th>
</tr>
</thead>
<tbody id="calendarBody"></tbody>
</table>
<div class="weight-list-section" style="margin-top: 30px;">
<h3>ğŸ“‹ ì²´ì¤‘ ê¸°ë¡ ëª©ë¡</h3>
<div id="weightListContainer" style="margin-top: 15px;"></div>
</div>
</div>
</div>
<!-- ê°€ê³„ë¶€ íƒ­ (ì¶”ê°€) -->
<div class="tab-content" id="accountbook">
<h2>ğŸ“’ ë‚˜ì˜ ê°€ê³„ë¶€</h2>
<div class="accountbook">
<div class="accountbook-form">
<div class="form-group">
<label for="ab-date">ë‚ ì§œ</label>
<input class="form-input" id="ab-date" type="date"/>
</div>
<div class="form-group">
<label for="ab-amount">ê¸ˆì•¡</label>
<input class="form-input" id="ab-amount" type="number"/>
</div>
<div class="form-group">
<label for="ab-type">ì¢…ë¥˜</label>
<select class="form-input" id="ab-type">
<option value="income">ìˆ˜ì…</option>
<option value="expense">ì§€ì¶œ</option>
</select>
</div>
<div class="form-group">
<label for="ab-category">ì¹´í…Œê³ ë¦¬</label>
<select id="ab-category" name="ab-category">
<option value="ì‹ë¹„(ì¥ë³´ê¸°)">ì‹ë¹„(ì¥ë³´ê¸°)</option>
<option value="ì¿ í° êµ¬ë§¤">ì¿ í° êµ¬ë§¤</option>
<option value="ì£¼ì „ë¶€ë¦¬">ì£¼ì „ë¶€ë¦¬</option>
<option value="ì‡¼í•‘">ì‡¼í•‘</option>
<option value="ìŒì‹_ë°°ë‹¬">ìŒì‹_ë°°ë‹¬</option>
<option value="ìŒì‹_ì˜¨ë¼ì¸ êµ¬ë§¤">ìŒì‹_ì˜¨ë¼ì¸ êµ¬ë§¤</option>
<option value="ì™¸ì‹">ì™¸ì‹</option>
<option value="ì˜ë£Œë¹„">ì˜ë£Œë¹„</option>
<option value="ì¸ê°„ê´€ê³„">ì¸ê°„ê´€ê³„</option>
<option value="ìš´ë™">ìš´ë™</option>
<option value="êµí†µë¹„">êµí†µë¹„</option>
<option value="ì§‘ ê´€ë ¨ ë¬¼í’ˆ">ì§‘ ê´€ë ¨ ë¬¼í’ˆ</option>
<option value="ê°€ì¡±ë¹„">ê°€ì¡±ë¹„</option>
<option value="ë§¤ë‹¬ ê³ ì •ë¹„">ë§¤ë‹¬ ê³ ì •ë¹„</option>
<option value="ë¬¸í™” ìƒí™œ">ë¬¸í™” ìƒí™œ</option>
<option value="ìê¸°ê³„ë°œ">ìê¸°ê³„ë°œ</option>
<option value="ì—…ë¬´ìš©">ì—…ë¬´ìš©</option>
<option value="ê³µìš©">ê³µìš©</option>
<option value="ì°¨ëŸ‰ ìœ ì§€ë¹„">ì°¨ëŸ‰ ìœ ì§€ë¹„</option>
<option value="êµ¬ë…">êµ¬ë…</option>
<option value="ê¸°íƒ€">ê¸°íƒ€</option>
</select>
</div>
<div class="form-group">
<label for="ab-method">ê²°ì œ ë°©ë²•</label>
<select id="ab-method" name="ab-method">
<option value="í˜„ëŒ€ì¹´ë“œ">í˜„ëŒ€ì¹´ë“œ</option>
<option value="ì‚¼ì„±ì¹´ë“œ">ì‚¼ì„±ì¹´ë“œ</option>
<option value="ë¡¯ë°ì¹´ë“œ">ë¡¯ë°ì¹´ë“œ</option>
<option value="ì‹ í•œì¹´ë“œ">ì‹ í•œì¹´ë“œ</option>
<option value="ê³„ì¢Œ">ê³„ì¢Œ</option>
<option value="í˜„ê¸ˆ">í˜„ê¸ˆ</option>
<option value="ê¸°íƒ€">ê¸°íƒ€</option>
</select>
</div>
<div class="form-group">
<label for="ab-memo">ë©”ëª¨</label>
<textarea id="ab-memo" rows="3"></textarea>
</div>
<button id="ab-submit">ê¸°ë¡í•˜ê¸°</button>
</div>
<h3>ğŸ“… ë‹¬ë ¥ ë³´ê¸°</h3>
<div id="ab-calendar" style="min-height:600px; height:600px; margin-bottom:20px; background-color: #f9f9f9; border-radius: 8px; padding: 10px;"></div>
<h3>ğŸ“ƒ ë‚´ì—­ ë¦¬ìŠ¤íŠ¸</h3>
<table class="accountbook-list" id="ab-list">
<thead>
<tr>
<th>ë‚ ì§œ</th><th>ê¸ˆì•¡</th><th>ì¢…ë¥˜</th><th>ì¹´í…Œê³ ë¦¬</th><th>ê²°ì œ</th><th>ë©”ëª¨</th><th>ì‘ì—…</th>
</tr>
</thead>
<tbody>
<!-- ê°€ê³„ë¶€ í•­ëª©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
</tbody>
</table>
<div class="accountbook-summary" id="ab-summary">
<strong>ì´ë²ˆ ë‹¬ ìˆ˜ì…:</strong> 0ì› | <strong>ì§€ì¶œ:</strong> 0ì›
                </div>
<h3>ğŸ“Š í†µê³„ ë³´ê¸°</h3>
<div class="chart-container">
<canvas height="200" id="ab-month-summary" style="max-width:600px; margin:20px auto; display:block;"></canvas>
</div>
<div class="chart-container">
<canvas height="200" id="ab-category-summary" style="max-width:600px; margin:20px auto; display:block;"></canvas>
</div>
<div class="chart-container">
<canvas height="200" id="ab-method-summary" style="max-width:600px; margin:20px auto; display:block;"></canvas>
</div>
</div>
</div>
<!-- í™ˆí™”ë©´ ì„¤ì • íƒ­ -->

</div>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
        // ì „ì—­ ë³€ìˆ˜
        let diaries = [];
        let memos = [];
        let todos = [];
        let schedules = [];
        let accountData = []; // ê°€ê³„ë¶€ ë°ì´í„° ì¶”ê°€
        let currentCalendarYear = new Date().getFullYear();
        let currentCalendarMonth = new Date().getMonth();
        let currentTodoYear = new Date().getFullYear();
        let currentTodoMonth = new Date().getMonth();
        let currentScheduleYear = new Date().getFullYear();
        let currentScheduleMonth = new Date().getMonth();
        let selectedDate = null;
        
        // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
        function loadInitialData() {
            document.getElementById("ab-submit")?.addEventListener("click", addAccountItem);

document.getElementById("addScheduleBtn")?.addEventListener("click", addSchedule);

            document.getElementById("ab-submit")?.addEventListener("click", addAccountItem);
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°ì´í„° ë¡œë“œ
            loadDataFromLocalStorage();
            
            loadDiaries();
            loadMemos();
            renderTodos();
            renderTodoCalendar();
            renderWeightCalendar();
            renderWeightList();
            loadSchedules();
            renderScheduleCalendar();
            loadAccountData(); // ê°€ê³„ë¶€ ë°ì´í„° ë¡œë“œ
            applyCustomHome();
            
            // ê¸°ë³¸ ë‚ ì§œ ì„¤ì •
            const today = new Date().toISOString().split('T')[0];
            if (document.getElementById('diaryDate')) document.getElementById('diaryDate').value = today;
            if (document.getElementById('weightDate')) document.getElementById('weightDate').value = today;
            if (document.getElementById('eventDate')) document.getElementById('eventDate').value = today;
            if (document.getElementById('ab-date')) document.getElementById('ab-date').value = today;

            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
            document.getElementById('save-button').addEventListener('click', saveCustomHome);
            document.getElementById('addScheduleBtn').addEventListener('click', addSchedule);
            document.getElementById('viewListBtn').addEventListener('click', showListView);
            document.getElementById('viewCalendarBtn').addEventListener('click', showCalendarView);
            document.getElementById('prevMonthBtn').addEventListener('click', prevScheduleMonth);
            document.getElementById('nextMonthBtn').addEventListener('click', nextScheduleMonth);
            
            // ê°€ê³„ë¶€ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
            if (document.getElementById('ab-submit')) {
                document.getElementById('ab-submit').addEventListener('click', addAccountItem);
            }
            
            // í•„ìš”í•œ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
            loadRequiredLibraries();
        }
        
        // í•„ìš”í•œ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ í•¨ìˆ˜
        function loadRequiredLibraries() {
            // FullCalendar ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
            if (typeof FullCalendar === 'undefined') {
                // CSS ë¨¼ì € ë¡œë“œ
                const style = document.createElement('link');
                style.rel = 'stylesheet';
                style.href = 'https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.css';
                document.head.appendChild(style);
                
                // ê·¸ ë‹¤ìŒ JS ë¡œë“œ
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.js';
                script.onload = function() {
                    // ê°€ê³„ë¶€ íƒ­ì´ í˜„ì¬ í™œì„±í™”ë˜ì–´ ìˆëŠ” ê²½ìš°ì—ë§Œ ë‹¬ë ¥ ì´ˆê¸°í™”
                    if (document.getElementById('accountbook').classList.contains('active')) {
                        // FullCalendar ì´ˆê¸°í™” ì „ì— ì•½ê°„ì˜ ì§€ì—° ì¶”ê°€
                        setTimeout(function() {
                            // ë‹¬ë ¥ ì»¨í…Œì´ë„ˆë¥¼ ì´ˆê¸°í™”
                            const calendarEl = document.getElementById('ab-calendar');
                            if (calendarEl) {
                                calendarEl.innerHTML = '';
                                initializeAccountCalendar();
                            }
                        }, 200);
                    }
                };
                document.head.appendChild(script);
            } else if (document.getElementById('accountbook').classList.contains('active')) {
                // FullCalendarê°€ ì´ë¯¸ ë¡œë“œë˜ì–´ ìˆì§€ë§Œ ë‹¬ë ¥ì´ í‘œì‹œë˜ì§€ ì•ŠëŠ” ê²½ìš°
                setTimeout(function() {
                    const calendarEl = document.getElementById('ab-calendar');
                    if (calendarEl && !calendarEl.querySelector('.fc')) {
                        calendarEl.innerHTML = '';
                        initializeAccountCalendar();
                    }
                }, 200);
            }
            
            // Chart.js ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
            if (typeof Chart === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/chart.js';
                script.onload = function() {
                    // ê°€ê³„ë¶€ íƒ­ì´ í˜„ì¬ í™œì„±í™”ë˜ì–´ ìˆëŠ” ê²½ìš°ì—ë§Œ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
                    if (document.getElementById('accountbook').classList.contains('active')) {
                        createCharts();
                    }
                };
                document.head.appendChild(script);
            }
        }
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°ì´í„° ë¡œë“œ
        function loadDataFromLocalStorage() {
            try {
                diaries = JSON.parse(localStorage.getItem('diaries')) || [];
                memos = JSON.parse(localStorage.getItem('memos')) || [];
                todos = JSON.parse(localStorage.getItem('todos')) || [];
                schedules = JSON.parse(localStorage.getItem('schedules')) || [];
                accountData = JSON.parse(localStorage.getItem('accountData')) || []; // ê°€ê³„ë¶€ ë°ì´í„° ì¶”ê°€
            } catch (e) {
                console.error('ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                diaries = [];
                memos = [];
                todos = [];
                schedules = [];
                accountData = [];
            }
        }
        
        // íƒ­ ì „í™˜ ê¸°ëŠ¥
        function showTab(tabId) {
            // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // ì„ íƒëœ íƒ­ í™œì„±í™”
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`.nav-link[onclick="showTab('${tabId}')"]`).classList.add('active');
            
            // í•„ìš”í•œ ê²½ìš° íƒ­ ì´ˆê¸°í™”
            if (tabId === 'diary') loadDiaries();
            if (tabId === 'memo') loadMemos();
            if (tabId === 'todo') {
                renderTodos();
                renderTodoCalendar();
            }
            if (tabId === 'weight') {
                renderWeightCalendar();
                renderWeightList();
            }
            
if (tabId === 'schedule') {
    loadSchedules();
    renderScheduleCalendar();

    // ë²„íŠ¼ ë¦¬ìŠ¤ë„ˆ ìˆ˜ë™ ì¬ë“±ë¡
    const calBtn = document.getElementById('viewCalendarBtn');
    const listBtn = document.getElementById('viewListBtn');
    if (calBtn) {
        calBtn.removeEventListener('click', showCalendarView);
        calBtn.addEventListener('click', showCalendarView);
    }
    if (listBtn) {
        listBtn.removeEventListener('click', showListView);
        listBtn.addEventListener('click', showListView);
    }

            }
            if (tabId === 'accountbook') {
                loadAccountData();
                
                // ë‹¬ë ¥ì´ í‘œì‹œë˜ì§€ ì•ŠëŠ” ë¬¸ì œ í•´ê²°
                setTimeout(function() {
                    try {
                        const abCalendar = document.getElementById('ab-calendar');
                        if (abCalendar) {
                            // ë‹¬ë ¥ì´ ì œëŒ€ë¡œ ë Œë”ë§ë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸
                            const fcContent = abCalendar.querySelector('.fc');
                            if (!fcContent || fcContent.offsetHeight < 10) {
                                console.log("ë‹¬ë ¥ ë‹¤ì‹œ ì´ˆê¸°í™” ì¤‘...");
                                initializeAccountCalendar();
                            }
                        }
                    } catch (e) {
                        console.error("ë‹¬ë ¥ í™•ì¸ ì˜¤ë¥˜:", e);
                        initializeAccountCalendar();
                    }
                }, 300);
            }
        }
        
        /********** ì¼ê¸°ì¥ ê¸°ëŠ¥ **********/
        function saveDiary() {
            const date = document.getElementById('diaryDate').value;
            const content = document.getElementById('diaryContent').value;
            
            if (!date || !content) {
                alert('ë‚ ì§œì™€ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ê°™ì€ ë‚ ì§œì˜ ì¼ê¸°ê°€ ìˆëŠ”ì§€ í™•ì¸
            const existingIndex = diaries.findIndex(diary => diary.date === date);
            
            if (existingIndex !== -1) {
                if (confirm('ê°™ì€ ë‚ ì§œì˜ ì¼ê¸°ê°€ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤. ë®ì–´ì“°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    diaries[existingIndex].content = content;
                    diaries[existingIndex].updatedAt = new Date().toISOString();
                } else {
                    return;
                }
            } else {
                const diary = {
                    id: Date.now(),
                    date,
                    content,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                diaries.push(diary);
            }
            
            try {
                localStorage.setItem('diaries', JSON.stringify(diaries));
                
                // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                document.getElementById('diaryContent').value = '';
                
                loadDiaries();
                alert('ì¼ê¸°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('ì¼ê¸° ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                alert('ì¼ê¸° ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        function loadDiaries() {
            const diaryEntries = document.getElementById('diaryEntries');
            if (!diaryEntries) return;
            
            diaryEntries.innerHTML = '';
            
            // ë‚ ì§œ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ (ìµœì‹  ì¼ê¸°ê°€ ìœ„ì— í‘œì‹œ)
            diaries.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (diaries.length === 0) {
                diaryEntries.innerHTML = '<p style="text-align: center; color: #888; padding: 20px;">ì €ì¥ëœ ì¼ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            diaries.forEach(diary => {
                const entry = document.createElement('div');
                entry.className = 'diary-entry';
                entry.innerHTML = `
                    <div class="diary-date">${formatDate(diary.date)}</div>
                    <div class="diary-content">${diary.content}</div>
                    <div class="diary-meta">
                        ë§ˆì§€ë§‰ ìˆ˜ì •: ${formatDateTime(diary.updatedAt)}
                        <div>
                            <button onclick="editDiary(${diary.id})">ìˆ˜ì •</button>
                            <button class="delete-btn" onclick="deleteDiary(${diary.id})">ì‚­ì œ</button>
                        </div>
                    </div>
                `;
                
                diaryEntries.appendChild(entry);
            });
        }
        
        function editDiary(id) {
            const diary = diaries.find(d => d.id === id);
            if (!diary) return;
            
            document.getElementById('diaryDate').value = diary.date;
            document.getElementById('diaryContent').value = diary.content;
            
            window.scrollTo(0, 0);
            
            // ì›ë˜ ì¼ê¸° ì‚­ì œ (ì €ì¥ ì‹œ ìƒˆë¡œ ì¶”ê°€ë¨)
            deleteDiaryWithoutConfirm(id);
        }
        
        function deleteDiary(id) {
            if (confirm('ì´ ì¼ê¸°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                deleteDiaryWithoutConfirm(id);
                alert('ì¼ê¸°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        function deleteDiaryWithoutConfirm(id) {
            diaries = diaries.filter(diary => diary.id !== id);
            localStorage.setItem('diaries', JSON.stringify(diaries));
            loadDiaries();
        }
        
        /********** ë©”ëª¨ ê¸°ëŠ¥ **********/
        function saveMemo() {
            const title = document.getElementById('memoTitle').value;
            const content = document.getElementById('memoContent').value;
            
            if (!title || !content) {
                alert('ì œëª©ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const memo = {
                id: Date.now(),
                title,
                content,
                createdAt: new Date().toISOString()
            };
            
            memos.push(memo);
            
            try {
                localStorage.setItem('memos', JSON.stringify(memos));
                
                document.getElementById('memoTitle').value = '';
                document.getElementById('memoContent').value = '';
                
                loadMemos();
                alert('ë©”ëª¨ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('ë©”ëª¨ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                alert('ë©”ëª¨ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        function loadMemos() {
            const memoList = document.getElementById('memoList');
            if (!memoList) return;
            
            memoList.innerHTML = '';
            
            memos.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            if (memos.length === 0) {
                memoList.innerHTML = '<p style="text-align: center; color: #888; padding: 20px;">ì €ì¥ëœ ë©”ëª¨ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            memos.forEach(memo => {
                const memoDiv = document.createElement('div');
                memoDiv.className = 'diary-entry';
                memoDiv.innerHTML = `
                    <div class="diary-date">${memo.title}</div>
                    <div class="memo-content">${memo.content}</div>
                    <div class="diary-meta">
                        ì‘ì„±ì¼: ${formatDateTime(memo.createdAt)}
                        <div>
                            <button onclick="editMemo(${memo.id})">ìˆ˜ì •</button>
                            <button class="delete-btn" onclick="deleteMemo(${memo.id})">ì‚­ì œ</button>
                        </div>
                    </div>
                `;
                
                memoList.appendChild(memoDiv);
            });
        }
        
        function editMemo(id) {
            const memo = memos.find(m => m.id === id);
            if (!memo) return;
            
            document.getElementById('memoTitle').value = memo.title;
            document.getElementById('memoContent').value = memo.content;
            
            window.scrollTo(0, 0);
            
            // ì›ë˜ ë©”ëª¨ ì‚­ì œ (ì €ì¥ ì‹œ ìƒˆë¡œ ì¶”ê°€ë¨)
            deleteMemoWithoutConfirm(id);
        }
        
        function deleteMemo(id) {
            if (confirm('ì´ ë©”ëª¨ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                deleteMemoWithoutConfirm(id);
                alert('ë©”ëª¨ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        function deleteMemoWithoutConfirm(id) {
            memos = memos.filter(memo => memo.id !== id);
            localStorage.setItem('memos', JSON.stringify(memos));
            loadMemos();
        }
        
        /********** í• ì¼ ê¸°ëŠ¥ **********/
        function addTodo() {
            const todoInput = document.getElementById('todoInput');
            const text = todoInput.value.trim();
            
            if (!text) {
                alert('í•  ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const todo = {
                id: Date.now(),
                text: text,
                completed: false,
                date: new Date().toISOString().split('T')[0], // í˜„ì¬ ë‚ ì§œ ì €ì¥
                createdAt: new Date().toISOString()
            };
            
            todos.push(todo);
            
            try {
                localStorage.setItem('todos', JSON.stringify(todos));
                
                todoInput.value = '';
                
                renderTodos();
                renderTodoCalendar();
            } catch (e) {
                console.error('í• ì¼ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                alert('í• ì¼ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        function renderTodos() {
            const todoList = document.getElementById('todoList');
            if (!todoList) return;
            
            todoList.innerHTML = '';
            
            if (todos.length === 0) {
                todoList.innerHTML = '<p style="text-align: center; color: #888; padding: 20px;">í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ í•  ì¼ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>';
                return;
            }
            
            todos.sort((a, b) => {
                // ì™„ë£Œë˜ì§€ ì•Šì€ í•­ëª© ë¨¼ì €
                if (a.completed !== b.completed) {
                    return a.completed ? 1 : -1;
                }
                // ê·¸ ë‹¤ìŒìœ¼ë¡œëŠ” ìµœì‹ ìˆœ
                return new Date(b.createdAt) - new Date(a.createdAt);
            });
            
            todos.forEach(todo => {
                const todoItem = document.createElement('div');
                todoItem.className = 'todo-item';
                todoItem.innerHTML = `
                    <div class="todo-text ${todo.completed ? 'completed' : ''}">
                        <input type="checkbox" ${todo.completed ? 'checked' : ''} onchange="toggleTodo(${todo.id})">
                        <span>${todo.text}</span>
                    </div>
                    <div>
                        <button onclick="editTodo(${todo.id})">ìˆ˜ì •</button>
                        <button class="delete-btn" onclick="deleteTodo(${todo.id})">ì‚­ì œ</button>
                    </div>
                `;
                
                todoList.appendChild(todoItem);
            });
        }
        
        function renderTodoCalendar() {
            const todoCalendarBody = document.getElementById('todoCalendarBody');
            const todoCalendarHeader = document.getElementById('todoCalendarHeader');
            
            if (!todoCalendarBody || !todoCalendarHeader) return;
            
            todoCalendarHeader.textContent = `${currentTodoYear}ë…„ ${currentTodoMonth + 1}ì›”`;
            
            const firstDay = new Date(currentTodoYear, currentTodoMonth, 1).getDay();
            const daysInMonth = new Date(currentTodoYear, currentTodoMonth + 1, 0).getDate();
            
            todoCalendarBody.innerHTML = '';
            
            let row = document.createElement('tr');
            
            // ì²« ì£¼ì˜ ë¹ˆ ì…€ ì±„ìš°ê¸°
            for (let i = 0; i < firstDay; i++) {
                const td = document.createElement('td');
                row.appendChild(td);
            }
            
            // ë‚ ì§œ ì±„ìš°ê¸°
            for (let day = 1; day <= daysInMonth; day++) {
                const td = document.createElement('td');
                
                // í•´ë‹¹ ë‚ ì§œ ë¬¸ìì—´
                const dateStr = `${currentTodoYear}-${String(currentTodoMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                
                // ë‚ ì§œ ìˆ«ì í‘œì‹œ
                const dayNumber = document.createElement('div');
                dayNumber.className = 'day-number';
                dayNumber.textContent = day;
                td.appendChild(dayNumber);
                
                // í•´ë‹¹ ë‚ ì§œì˜ í• ì¼ ì²´í¬
                const todosForDate = todos.filter(todo => todo.date === dateStr);
                
                // í• ì¼ì´ ìˆìœ¼ë©´ ì²´í¬ë°•ìŠ¤ë¡œ í‘œì‹œ
                if (todosForDate.length > 0) {
                    const todoContainer = document.createElement('div');
                    
                    
    todosForDate.forEach(todo => {
        const todoDiv = document.createElement('div');
        todoDiv.className = 'todo-entry';

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = todo.completed;

        checkbox.onclick = function(e) {
            e.stopPropagation();
            toggleTodoInCalendar(todo.id);
        };

        const textSpan = document.createElement('span');
        textSpan.textContent = todo.text;
        textSpan.style.overflow = 'hidden';
        textSpan.style.textOverflow = 'ellipsis';
        textSpan.style.whiteSpace = 'nowrap';

        if (todo.completed) {
            textSpan.style.textDecoration = 'line-through';
            textSpan.style.color = '#888';
        }

        todoDiv.appendChild(checkbox);
        todoDiv.appendChild(textSpan);
        todoContainer.appendChild(todoDiv);
    });

    td.appendChild(todoContainer);
    
                    
                    td.appendChild(todoContainer);
                }
                
                row.appendChild(td);
                
                // í† ìš”ì¼ì´ë‚˜ ì›”ì˜ ë§ˆì§€ë§‰ ë‚ ì´ë©´ ìƒˆ í–‰ ì‹œì‘
                if ((firstDay + day) % 7 === 0 || day === daysInMonth) {
                    todoCalendarBody.appendChild(row);
                    if (day !== daysInMonth) {
                        row = document.createElement('tr');
                    }
                }
            }
        }
        
        function toggleTodo(id) {
            const todo = todos.find(t => t.id === id);
            if (todo) {
                todo.completed = !todo.completed;
                localStorage.setItem('todos', JSON.stringify(todos));
                renderTodos();
                renderTodoCalendar();
            }
        }
        
        function toggleTodoInCalendar(id) {
            const todo = todos.find(t => t.id === id);
            if (todo) {
                todo.completed = !todo.completed;
                localStorage.setItem('todos', JSON.stringify(todos));
                renderTodos();
                renderTodoCalendar();
            }
        }
        
        function editTodo(id) {
            const todo = todos.find(t => t.id === id);
            if (!todo) return;
            
            const editForm = document.getElementById('editTodoForm');
            const editInput = document.getElementById('editTodoInput');
            const editId = document.getElementById('editTodoId');
            
            editForm.style.display = 'block';
            editInput.value = todo.text;
            editId.value = todo.id;
            
            editForm.scrollIntoView({ behavior: 'smooth' });
        }
        
        function updateTodo() {
            const editInput = document.getElementById('editTodoInput');
            const editId = document.getElementById('editTodoId');
            
            const text = editInput.value.trim();
            const id = parseInt(editId.value);
            
            if (!text) {
                alert('í•  ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const todoIndex = todos.findIndex(t => t.id === id);
            if (todoIndex !== -1) {
                todos[todoIndex].text = text;
                
                try {
                    localStorage.setItem('todos', JSON.stringify(todos));
                    
                    document.getElementById('editTodoForm').style.display = 'none';
                    
                    renderTodos();
                    renderTodoCalendar();
                    
                    alert('í•  ì¼ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
                } catch (e) {
                    console.error('í• ì¼ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                    alert('í• ì¼ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }
        }
        
        function cancelEdit() {
            document.getElementById('editTodoForm').style.display = 'none';
        }
        
        function deleteTodo(id) {
            if (confirm('ì´ í•  ì¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                todos = todos.filter(todo => todo.id !== id);
                localStorage.setItem('todos', JSON.stringify(todos));
                renderTodos();
                renderTodoCalendar();
                alert('í•  ì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        function prevTodoMonth() {
            currentTodoMonth--;
            if (currentTodoMonth < 0) {
                currentTodoMonth = 11;
                currentTodoYear--;
            }
            renderTodoCalendar();
        }
        
        function nextTodoMonth() {
            currentTodoMonth++;
            if (currentTodoMonth > 11) {
                currentTodoMonth = 0;
                currentTodoYear++;
            }
            renderTodoCalendar();
        }
        
        /********** ì²´ì¤‘ ê¸°ë¡ ê¸°ëŠ¥ **********/
        function saveWeight() {
            const date = document.getElementById('weightDate').value;
            const value = document.getElementById('weightValue').value;
            
            if (!date || !value) {
                alert('ë‚ ì§œì™€ ì²´ì¤‘ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            let weightData = {};
            try {
                weightData = JSON.parse(localStorage.getItem('weightRecords') || '{}');
            } catch (e) {
                console.error('ì²´ì¤‘ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                weightData = {};
            }
            
            if (weightData[date] && !confirm(`${formatDate(date)}ì— ì´ë¯¸ ì²´ì¤‘ì´ ê¸°ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë®ì–´ì“°ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }
            
            weightData[date] = parseFloat(value);
            
            try {
                localStorage.setItem('weightRecords', JSON.stringify(weightData));
                
                document.getElementById('weightValue').value = '';
                
                renderWeightCalendar();
                renderWeightList();
                
                alert('ì²´ì¤‘ì´ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                console.error('ì²´ì¤‘ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                alert('ì²´ì¤‘ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        function renderWeightCalendar() {
            let weightData = {};
            try {
                weightData = JSON.parse(localStorage.getItem('weightRecords') || '{}');
            } catch (e) {
                console.error('ì²´ì¤‘ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                weightData = {};
            }
            
            const body = document.getElementById('calendarBody');
            const title = document.getElementById('calendarTitle');
            
            if (!body || !title) return;
            
            title.textContent = `${currentCalendarYear}ë…„ ${currentCalendarMonth + 1}ì›”`;
            
            body.innerHTML = '';
        
            const firstDay = new Date(currentCalendarYear, currentCalendarMonth, 1).getDay();
            const daysInMonth = new Date(currentCalendarYear, currentCalendarMonth + 1, 0).getDate();
        
            let row = document.createElement('tr');
            
            // ì²« ì£¼ì˜ ë¹ˆ ì…€ ì±„ìš°ê¸°
            for (let i = 0; i < firstDay; i++) {
                const td = document.createElement('td');
                row.appendChild(td);
            }
        
            // ë‚ ì§œ ì±„ìš°ê¸°
            for (let day = 1; day <= daysInMonth; day++) {
                const td = document.createElement('td');
                const dateKey = `${currentCalendarYear}-${String(currentCalendarMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                
                // ë‚ ì§œ í‘œì‹œ
                const dayNumber = document.createElement('div');
                dayNumber.className = 'day-number';
                dayNumber.textContent = day;
                td.appendChild(dayNumber);
                
                // ì²´ì¤‘ ê¸°ë¡ì´ ìˆìœ¼ë©´ í‘œì‹œ (ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ì—†ìŒ)
                if (weightData[dateKey]) {
                    const weightDiv = document.createElement('div');
                    weightDiv.className = 'weight-entry';
                    weightDiv.textContent = weightData[dateKey] + "kg";
                    td.appendChild(weightDiv);
                }
                
                row.appendChild(td);
                
                // í† ìš”ì¼ì´ë‚˜ ì›”ì˜ ë§ˆì§€ë§‰ ë‚ ì´ë©´ ìƒˆ í–‰ ì‹œì‘
                if ((firstDay + day) % 7 === 0 || day === daysInMonth) {
                    body.appendChild(row);
                    if (day !== daysInMonth) {
                        row = document.createElement('tr');
                    }
                }
            }
        }
        
        function renderWeightList() {
            const container = document.getElementById('weightListContainer');
            if (!container) return;
            
            let weightData = {};
            try {
                weightData = JSON.parse(localStorage.getItem('weightRecords') || '{}');
            } catch (e) {
                console.error('ì²´ì¤‘ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                weightData = {};
            }
            
            const entries = Object.entries(weightData).map(([date, weight]) => ({ date, weight }));
            
            if (entries.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #888;">ê¸°ë¡ëœ ì²´ì¤‘ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            entries.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            const table = document.createElement('table');
            table.style.width = '100%';
            table.style.borderCollapse = 'collapse';
            table.style.marginBottom = '20px';
            table.style.background = 'white';
            
            const thead = document.createElement('thead');
            thead.innerHTML = `
                <tr style="background-color: #f0f0f0;">
                    <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">ë‚ ì§œ</th>
                    <th style="padding: 10px; text-align: center; border: 1px solid #ddd;">ì²´ì¤‘</th>
                    <th style="padding: 10px; text-align: center; border: 1px solid #ddd;">ê´€ë¦¬</th>
                </tr>
            `;
            table.appendChild(thead);
            
            const tbody = document.createElement('tbody');
            entries.forEach(entry => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td style="padding: 10px; border: 1px solid #ddd;">${formatDate(entry.date)}</td>
                    <td style="padding: 10px; text-align: center; border: 1px solid #ddd; font-weight: bold;">${entry.weight} kg</td>
                    <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">
                        <button onclick="editWeight('${entry.date}', ${entry.weight})">ìˆ˜ì •</button>
                        <button class="delete-btn" onclick="deleteWeight('${entry.date}')">ì‚­ì œ</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            table.appendChild(tbody);
            
            container.innerHTML = '';
            container.appendChild(table);
        }
        
        function editWeight(dateKey, currentValue) {
            const newWeight = prompt(`${formatDate(dateKey)}ì˜ ì²´ì¤‘ì„ ìˆ˜ì •í•©ë‹ˆë‹¤. ìƒˆ ì²´ì¤‘ì„ ì…ë ¥í•˜ì„¸ìš”:`, currentValue);
            
            if (newWeight !== null && !isNaN(newWeight) && newWeight.trim() !== '') {
                let weightData = {};
                try {
                    weightData = JSON.parse(localStorage.getItem('weightRecords') || '{}');
                } catch (e) {
                    console.error('ì²´ì¤‘ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                    weightData = {};
                }
                
                weightData[dateKey] = parseFloat(newWeight);
                
                try {
                    localStorage.setItem('weightRecords', JSON.stringify(weightData));
                    
                    renderWeightCalendar();
                    renderWeightList();
                    
                    alert('ì²´ì¤‘ ê¸°ë¡ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
                } catch (e) {
                    console.error('ì²´ì¤‘ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                    alert('ì²´ì¤‘ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }
        }
        
        function deleteWeight(dateKey) {
            if (confirm(`${formatDate(dateKey)}ì˜ ì²´ì¤‘ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                let weightData = {};
                try {
                    weightData = JSON.parse(localStorage.getItem('weightRecords') || '{}');
                } catch (e) {
                    console.error('ì²´ì¤‘ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                    weightData = {};
                }
                
                delete weightData[dateKey];
                
                try {
                    localStorage.setItem('weightRecords', JSON.stringify(weightData));
                    
                    renderWeightCalendar();
                    renderWeightList();
                    
                    alert('ì²´ì¤‘ ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                } catch (e) {
                    console.error('ì²´ì¤‘ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
                    alert('ì²´ì¤‘ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }
        }
        
        function prevWeightMonth() {
            currentCalendarMonth--;
            if (currentCalendarMonth < 0) {
                currentCalendarMonth = 11;
                currentCalendarYear--;
            }
            renderWeightCalendar();
        }
        
        function nextWeightMonth() {
            currentCalendarMonth++;
            if (currentCalendarMonth > 11) {
                currentCalendarMonth = 0;
                currentCalendarYear++;
            }
            renderWeightCalendar();
        }

        /********** ìŠ¤ì¼€ì¤„ ê´€ë¦¬ ê¸°ëŠ¥ **********/
        function addSchedule() {
            const title = document.getElementById('eventTitle').value;
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const description = document.getElementById('eventDescription').value;
            
            if (!title || !date) {
                alert('ì œëª©ê³¼ ë‚ ì§œëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.');
                return;
            }
            
            const schedule = {
                id: Date.now(),
                title,
                date,
                time,
                description
            };
            
            schedules.push(schedule);
            localStorage.setItem('schedules', JSON.stringify(schedules));
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.getElementById('eventTitle').value = '';
            document.getElementById('eventTime').value = '';
            document.getElementById('eventDescription').value = '';
            
            // ë‹¤ì–‘í•œ ë³´ê¸° ëª¨ë“œ ì—…ë°ì´íŠ¸
            loadSchedules();
            renderScheduleCalendar();
            
            alert('ì¼ì •ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        function loadSchedules() {
            const tbody = document.querySelector('#scheduleTable tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // ë‚ ì§œìˆœìœ¼ë¡œ ì •ë ¬
            schedules.sort((a, b) => new Date(a.date + ' ' + (a.time || '00:00')) - new Date(b.date + ' ' + (b.time || '00:00')));
            
            if (schedules.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align:center;">ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                return;
            }
            
            schedules.forEach(schedule => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${formatDate(schedule.date)}</td>
                    <td>${schedule.time || '-'}</td>
                    <td>${schedule.title}</td>
                    <td>${schedule.description || '-'}</td>
                    <td>
                        <button onclick="editSchedule(${schedule.id})">ìˆ˜ì •</button>
                        <button class="delete-btn" onclick="deleteSchedule(${schedule.id})">ì‚­ì œ</button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function editSchedule(id) {
            const schedule = schedules.find(s => s.id === id);
            if (!schedule) return;
            
            document.getElementById('eventTitle').value = schedule.title;
            document.getElementById('eventDate').value = schedule.date;
            document.getElementById('eventTime').value = schedule.time || '';
            document.getElementById('eventDescription').value = schedule.description || '';
            
            // í•´ë‹¹ ì¼ì • ì‚­ì œ (ì €ì¥ ì‹œ ìƒˆë¡œ ì¶”ê°€ë¨)
            deleteScheduleWithoutConfirm(id);
            
            // ìŠ¤í¬ë¡¤ì„ ë§¨ ìœ„ë¡œ ì´ë™
            window.scrollTo(0, 0);
            
            // íƒ­ ì „í™˜
            showTab('schedule');
        }

        function deleteSchedule(id) {
            if (confirm('ì´ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                deleteScheduleWithoutConfirm(id);
                alert('ì¼ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        function deleteScheduleWithoutConfirm(id) {
            schedules = schedules.filter(schedule => schedule.id !== id);
            localStorage.setItem('schedules', JSON.stringify(schedules));
            loadSchedules();
            renderScheduleCalendar();
            
            // ì„ íƒëœ ë‚ ì§œê°€ ìˆë‹¤ë©´ í•´ë‹¹ ë‚ ì§œì˜ ì´ë²¤íŠ¸ ëª©ë¡ ì—…ë°ì´íŠ¸
            if (selectedDate) {
                const selectedDateObj = new Date(currentScheduleYear, currentScheduleMonth, selectedDate);
                showEventsForDate(selectedDateObj);
            }
        }

        
function showCalendarView() {
    document.getElementById('viewListBtn')?.classList.remove('active');
    document.getElementById('viewCalendarBtn')?.classList.add('active');
    document.getElementById('listView')?.classList.remove('active');
    document.getElementById('calendarView')?.classList.add('active');

    renderScheduleCalendar();
}


        function showListView() {
            document.getElementById('viewListBtn').classList.add('active');
            document.getElementById('viewCalendarBtn').classList.remove('active');
            document.getElementById('listView').classList.add('active');
            document.getElementById('calendarView').classList.remove('active');
        }

function renderScheduleCalendar() {
    const calendarDays = document.getElementById('calendarDays');
    const currentMonthYear = document.getElementById('currentMonthYear');
    
    if (!calendarDays || !currentMonthYear) return;
    
    // ì›”/ë…„ í—¤ë” ì„¤ì •
    currentMonthYear.textContent = `${currentScheduleYear}ë…„ ${currentScheduleMonth + 1}ì›”`;
    
    // í˜„ì¬ ì›”ì˜ ì²«ë‚ 
    const firstDay = new Date(currentScheduleYear, currentScheduleMonth, 1);
    
    // í˜„ì¬ ì›”ì˜ ë§ˆì§€ë§‰ ë‚ 
    const lastDay = new Date(currentScheduleYear, currentScheduleMonth + 1, 0);
    
    // ì²«ë‚ ì˜ ìš”ì¼ (0: ì¼ìš”ì¼, 6: í† ìš”ì¼)
    const firstDayWeekday = firstDay.getDay();
    
    // ë‹¬ë ¥ ì…€ ì´ˆê¸°í™”
    calendarDays.innerHTML = '';
    
    // ì´ì „ ë‹¬ ë‚ ì§œ ì±„ìš°ê¸°
    for (let i = 0; i < firstDayWeekday; i++) {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'calendar-day other-month';
        dayDiv.innerHTML = `<div class="day-number"></div>`;
        calendarDays.appendChild(dayDiv);
    }
    
    // ì˜¤ëŠ˜ ë‚ ì§œ ì •ë³´
    const today = new Date();
    const todayDate = today.getDate();
    const todayMonth = today.getMonth();
    const todayYear = today.getFullYear();
    
    // í˜„ì¬ ë‹¬ ë‚ ì§œ ì±„ìš°ê¸°
    for (let i = 1; i <= lastDay.getDate(); i++) {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'calendar-day';
        
        // ì˜¤ëŠ˜ ë‚ ì§œ í‘œì‹œ
        if (i === todayDate && currentScheduleMonth === todayMonth && currentScheduleYear === todayYear) {
            dayDiv.classList.add('today');
        }
        
        // ì„ íƒëœ ë‚ ì§œ í‘œì‹œ
        if (i === selectedDate && currentScheduleMonth === currentScheduleMonth && currentScheduleYear === currentScheduleYear) {
            dayDiv.classList.add('selected');
        }
        
        // ë‚ ì§œì— í•´ë‹¹í•˜ëŠ” ì´ë²¤íŠ¸ í™•ì¸
        const dateString = `${currentScheduleYear}-${String(currentScheduleMonth + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
        const dateEvents = schedules.filter(schedule => schedule.date === dateString);
        
        // ì´ë²¤íŠ¸ê°€ ìˆìœ¼ë©´ í‘œì‹œ
        if (dateEvents.length > 0) {
            dayDiv.classList.add('has-events');
            
            // ì´ë²¤íŠ¸ í•­ëª© ì¶”ê°€ (ëª¨ë“  ì´ë²¤íŠ¸ í‘œì‹œ)
            const eventListDiv = document.createElement('div');
            eventListDiv.className = 'event-list';
            
            // ëª¨ë“  ì´ë²¤íŠ¸ í‘œì‹œ (ì œí•œ ì—†ìŒ)
            for (let j = 0; j < dateEvents.length; j++) {
                const eventDiv = document.createElement('div');
                eventDiv.className = 'event-item';
                eventDiv.textContent = dateEvents[j].title;
                eventListDiv.appendChild(eventDiv);
            }
            
            dayDiv.appendChild(eventListDiv);
        }
        
        // ë‚ ì§œ ë²ˆí˜¸ ì¶”ê°€
        const dayNumber = document.createElement('div');
        dayNumber.className = 'day-number';
        dayNumber.textContent = i;
        dayDiv.appendChild(dayNumber);
        
        // í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
        dayDiv.addEventListener('click', function() {
            // ì´ì „ì— ì„ íƒëœ ë‚ ì§œ í´ë˜ìŠ¤ ì œê±°
            const selectedDays = document.querySelectorAll('.calendar-day.selected');
            selectedDays.forEach(day => day.classList.remove('selected'));
            
            // í˜„ì¬ ì„ íƒëœ ë‚ ì§œ í‘œì‹œ
            this.classList.add('selected');
            selectedDate = i;
            
            // ì„ íƒëœ ë‚ ì§œì˜ ì´ë²¤íŠ¸ í‘œì‹œ
            const selectedDateObj = new Date(currentScheduleYear, currentScheduleMonth, i);
            showEventsForDate(selectedDateObj);
        });
        
        calendarDays.appendChild(dayDiv);
    }
    
    // ë‹¤ìŒ ë‹¬ ë‚ ì§œ ì±„ìš°ê¸° (6ì£¼ ì±„ìš°ê¸°)
    const usedCells = firstDayWeekday + lastDay.getDate();
    const remainingCells = 42 - usedCells; // 7ì¼ * 6ì£¼ = 42
    
    for (let i = 1; i <= remainingCells; i++) {
        const dayDiv = document.createElement('div');
        dayDiv.className = 'calendar-day other-month';
        dayDiv.innerHTML = `<div class="day-number"></div>`;
        calendarDays.appendChild(dayDiv);
    }
}

        function showEventsForDate(date) {
            const selectedDateEvents = document.getElementById('selectedDateEvents');
            if (!selectedDateEvents) return;
            
            const dateString = date.toISOString().split('T')[0];
            
            // í•´ë‹¹ ë‚ ì§œì˜ ì´ë²¤íŠ¸ í•„í„°ë§
            const dateEvents = schedules.filter(schedule => schedule.date === dateString);
            
            // ì´ë²¤íŠ¸ ëª©ë¡ ì´ˆê¸°í™”
            selectedDateEvents.innerHTML = '';
            
            // ë‚ ì§œ í—¤ë” ì¶”ê°€
            const dateHeader = document.createElement('h4');
            dateHeader.textContent = formatDate(dateString);
            selectedDateEvents.appendChild(dateHeader);
            
            if (dateEvents.length === 0) {
                const noEvents = document.createElement('p');
                noEvents.className = 'no-events';
                noEvents.textContent = 'ì´ ë‚ ì§œì—ëŠ” ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.';
                selectedDateEvents.appendChild(noEvents);
            } else {
                // ì‹œê°„ìˆœìœ¼ë¡œ ì •ë ¬
                dateEvents.sort((a, b) => {
                    if (!a.time) return 1;
                    if (!b.time) return -1;
                    return a.time.localeCompare(b.time);
                });
                
                // ì´ë²¤íŠ¸ ëª©ë¡ ìƒì„±
                dateEvents.forEach(event => {
                    const eventDiv = document.createElement('div');
                    eventDiv.className = 'event-day-item';
                    
                    eventDiv.innerHTML = `
                        <div class="event-time">${event.time || 'ì¢…ì¼'}</div>
                        <div class="event-title">${event.title}</div>
                        ${event.description ? `<div class="event-desc">${event.description}</div>` : ''}
                        <div style="text-align: right; margin-top: 10px;">
                            <button onclick="editSchedule(${event.id})">ìˆ˜ì •</button>
                            <button class="delete-btn" onclick="deleteSchedule(${event.id})">ì‚­ì œ</button>
                        </div>
                    `;
                    
                    selectedDateEvents.appendChild(eventDiv);
                });
            }
        }

        function prevScheduleMonth() {
            currentScheduleMonth--;
            if (currentScheduleMonth < 0) {
                currentScheduleMonth = 11;
                currentScheduleYear--;
            }
            renderScheduleCalendar();
            
            // ì„ íƒëœ ë‚ ì§œ ì´ˆê¸°í™”
            selectedDate = null;
            document.getElementById('selectedDateEvents').innerHTML = '<p class="no-events">ë‚ ì§œë¥¼ ì„ íƒí•˜ë©´ ì¼ì •ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>';
        }

        function nextScheduleMonth() {
            currentScheduleMonth++;
            if (currentScheduleMonth > 11) {
                currentScheduleMonth = 0;
                currentScheduleYear++;
            }
            renderScheduleCalendar();
            
            // ì„ íƒëœ ë‚ ì§œ ì´ˆê¸°í™”
            selectedDate = null;
            document.getElementById('selectedDateEvents').innerHTML = '<p class="no-events">ë‚ ì§œë¥¼ ì„ íƒí•˜ë©´ ì¼ì •ì´ í‘œì‹œë©ë‹ˆë‹¤.</p>';
        }

        /********** ê°€ê³„ë¶€ ê¸°ëŠ¥ **********/
        function loadAccountData() {
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê°€ê³„ë¶€ ë°ì´í„° ë¡œë“œ
            let abData = JSON.parse(localStorage.getItem('accountData') || '[]');
            accountData = abData;
            
            // ê°€ê³„ë¶€ ëª©ë¡ í‘œì‹œ
            renderAccountList();
            
            // ê°€ê³„ë¶€ ìš”ì•½ ì •ë³´ ì—…ë°ì´íŠ¸
            updateAccountSummary();
            
            // ì°¨íŠ¸ ì—…ë°ì´íŠ¸ (Chart.js ì‚¬ìš©)
            updateAccountCharts();
            
            // ê°€ê³„ë¶€ ë‹¬ë ¥ ì´ˆê¸°í™” (FullCalendar ì‚¬ìš©)
            // FullCalendarê°€ ë¡œë“œë˜ë©´ í˜¸ì¶œë¨
            if (typeof FullCalendar !== 'undefined') {
                initializeAccountCalendar();
            }
        }
        
        function addAccountItem() {
            const date = document.getElementById('ab-date').value;
            const amount = parseFloat(document.getElementById('ab-amount').value);
            const type = document.getElementById('ab-type').value;
            const category = document.getElementById('ab-category').value;
            const method = document.getElementById('ab-method').value;
            const memo = document.getElementById('ab-memo').value;
            
            if (!date || isNaN(amount) || amount <= 0) {
                alert('ë‚ ì§œì™€ ê¸ˆì•¡ì€ í•„ìˆ˜ì…ë‹ˆë‹¤. ê¸ˆì•¡ì€ 0ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }
            
            const item = {
                id: Date.now(),
                date,
                amount,
                type,
                category,
                method,
                memo
            };
            
            // ìƒˆ í•­ëª© ì¶”ê°€
            accountData.push(item);
            localStorage.setItem('accountData', JSON.stringify(accountData));
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            document.getElementById('ab-amount').value = '';
            document.getElementById('ab-memo').value = '';
            
            // ê°€ê³„ë¶€ ëª©ë¡ ë° ìš”ì•½ ì—…ë°ì´íŠ¸
            renderAccountList();
            updateAccountSummary();
            updateAccountCharts();
            
            // ë‹¬ë ¥ ì´ë²¤íŠ¸ ì—…ë°ì´íŠ¸ (FullCalendar ì‚¬ìš©)
            const calendarEl = document.getElementById('ab-calendar');
            if (calendarEl && typeof FullCalendar !== 'undefined') {
                const calendar = FullCalendar.getCalendarById('account-calendar');
                if (calendar) {
                    // ê¸°ì¡´ ë‹¬ë ¥ì´ ìˆìœ¼ë©´ ì´ë²¤íŠ¸ ì¶”ê°€
                    calendar.addEvent({
                        id: item.id.toString(),
                        title: `${item.type === 'income' ? 'ìˆ˜ì…' : 'ì§€ì¶œ'}: ${item.amount.toLocaleString()}ì› (${item.category})`,
                        start: item.date,
                        color: item.type === 'income' ? '#4CAF50' : '#f44336',
                        extendedProps: {
                            amount: item.amount,
                            category: item.category,
                            method: item.method,
                            memo: item.memo
                        }
                    });
                } else {
                    // ë‹¬ë ¥ì´ ì—†ìœ¼ë©´ ì´ˆê¸°í™”
                    initializeAccountCalendar();
                }
            }
            
            alert('ê°€ê³„ë¶€ í•­ëª©ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }
        
        function renderAccountList() {
            const tbody = document.querySelector('#ab-list tbody');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            // ë‚ ì§œ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ (ìµœì‹  í•­ëª©ì´ ìœ„ë¡œ)
            accountData.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (accountData.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;">ë“±ë¡ëœ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                return;
            }
            
            accountData.forEach(item => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${formatDate(item.date)}</td>
                    <td>${item.amount.toLocaleString()}ì›</td>
                    <td>${item.type === 'income' ? 'ìˆ˜ì…' : 'ì§€ì¶œ'}</td>
                    <td>${item.category}</td>
                    <td>${item.method}</td>
                    <td>${item.memo || '-'}</td>
                    <td>
                        <button class="delete-btn" onclick="deleteAccountItem(${item.id})">ì‚­ì œ</button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }
        
        function deleteAccountItem(id) {
            if (confirm('ì´ í•­ëª©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                accountData = accountData.filter(item => item.id !== id);
                localStorage.setItem('accountData', JSON.stringify(accountData));
                
                // ê°€ê³„ë¶€ ëª©ë¡ ë° ìš”ì•½ ì—…ë°ì´íŠ¸
                renderAccountList();
                updateAccountSummary();
                updateAccountCharts();
                
                alert('í•­ëª©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        function updateAccountSummary() {
            const summaryEl = document.getElementById('ab-summary');
            if (!summaryEl) return;
            
            // í˜„ì¬ ì›”ì˜ ìˆ˜ì…/ì§€ì¶œ í•©ê³„ ê³„ì‚°
            const now = new Date();
            const currentMonth = now.getMonth() + 1;
            const currentYear = now.getFullYear();
            
            let income = 0, expense = 0;
            
            accountData.forEach(item => {
                const itemDate = new Date(item.date);
                const itemMonth = itemDate.getMonth() + 1;
                const itemYear = itemDate.getFullYear();
                
                if (itemMonth === currentMonth && itemYear === currentYear) {
                    if (item.type === 'income') {
                        income += item.amount;
                    } else {
                        expense += item.amount;
                    }
                }
            });
            
            // ìš”ì•½ ì •ë³´ í‘œì‹œ
            summaryEl.innerHTML = `
                <strong>ì´ë²ˆ ë‹¬ ìˆ˜ì…:</strong> ${income.toLocaleString()}ì› | 
                <strong>ì§€ì¶œ:</strong> ${expense.toLocaleString()}ì› |
                <strong>ì”ì•¡:</strong> ${(income - expense).toLocaleString()}ì›
            `;
        }
        
        function updateAccountCharts() {
            // Chart.jsì™€ FullCalendar ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
            let requiredLibraries = [];
            
            if (typeof Chart === 'undefined') {
                requiredLibraries.push({
                    name: 'Chart.js',
                    src: 'https://cdn.jsdelivr.net/npm/chart.js'
                });
            }
            
            if (typeof FullCalendar === 'undefined') {
                requiredLibraries.push({
                    name: 'FullCalendar',
                    src: 'https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.js'
                });
                
                // FullCalendar CSSë„ ì¶”ê°€
                const style = document.createElement('link');
                style.rel = 'stylesheet';
                style.href = 'https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.min.css';
                document.head.appendChild(style);
            }
            
            if (requiredLibraries.length > 0) {
                loadLibraries(requiredLibraries, 0, function() {
                    createCharts();
                    initializeAccountCalendar();
                });
                return;
            }
            
            createCharts();
            initializeAccountCalendar();
        }
        
        // ë¼ì´ë¸ŒëŸ¬ë¦¬ ìˆœì°¨ì  ë¡œë“œ í•¨ìˆ˜
        function loadLibraries(libraries, index, callback) {
            if (index >= libraries.length) {
                callback();
                return;
            }
            
            const library = libraries[index];
            const script = document.createElement('script');
            script.src = library.src;
            script.onload = function() {
                loadLibraries(libraries, index + 1, callback);
            };
            document.head.appendChild(script);
        }
        
        // ê°€ê³„ë¶€ ë‹¬ë ¥ ì´ˆê¸°í™” í•¨ìˆ˜
        function initializeAccountCalendar() {
            const calendarEl = document.getElementById('ab-calendar');
            if (!calendarEl) return;
            
            // ë‹¬ë ¥ì— í‘œì‹œí•  ì´ë²¤íŠ¸ ë°ì´í„° ìƒì„±
            const events = accountData.map(item => ({
                id: item.id.toString(),
                title: `${item.type === 'income' ? 'ìˆ˜ì…' : 'ì§€ì¶œ'}: ${item.amount.toLocaleString()}ì› (${item.category})`,
                start: item.date,
                color: item.type === 'income' ? '#4CAF50' : '#f44336',
                extendedProps: {
                    amount: item.amount,
                    category: item.category,
                    method: item.method,
                    memo: item.memo
                }
            }));
            
            // ê¸°ì¡´ì— ì´ˆê¸°í™”ëœ ë‹¬ë ¥ì´ ìˆëŠ”ì§€ í™•ì¸
            if (calendarEl.innerHTML) {
                try {
                    // ê¸°ì¡´ ë‹¬ë ¥ì´ ìˆìœ¼ë©´ ì´ˆê¸°í™”
                    calendarEl.innerHTML = '';
                } catch (e) {
                    console.error("ë‹¬ë ¥ ì´ˆê¸°í™” ì˜¤ë¥˜:", e);
                }
            }
            
            try {
                // FullCalendar ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
                const calendar = new FullCalendar.Calendar(calendarEl, {
                    initialView: 'dayGridMonth',
                    headerToolbar: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'dayGridMonth,timeGridWeek'
                    },
                    events: events,
                    locale: 'ko',
                    height: '600px',
                    eventClick: function(info) {
                        // ì´ë²¤íŠ¸ í´ë¦­ ì‹œ ìƒì„¸ ì •ë³´ í‘œì‹œ
                        const eventData = info.event;
                        const props = eventData.extendedProps;
                        
                        alert(`[${eventData.title}]
ë‚ ì§œ: ${eventData.startStr}
ê¸ˆì•¡: ${props.amount.toLocaleString()}ì›
ì¹´í…Œê³ ë¦¬: ${props.category}
ê²°ì œë°©ë²•: ${props.method}
ë©”ëª¨: ${props.memo || 'ì—†ìŒ'}`);
                    },
                    datesSet: function(dateInfo) {
                        // ì›” ë³€ê²½ ì‹œ í•´ë‹¹ ì›”ì˜ ìˆ˜ì…/ì§€ì¶œ í•©ê³„ í‘œì‹œ
                        const start = dateInfo.start;
                        const end = dateInfo.end;
                        
                        let monthIncome = 0, monthExpense = 0;
                        
                        accountData.forEach(item => {
                            const itemDate = new Date(item.date);
                            if (itemDate >= start && itemDate < end) {
                                if (item.type === 'income') {
                                    monthIncome += item.amount;
                                } else {
                                    monthExpense += item.amount;
                                }
                            }
                        });
                        
                        // ë‹¬ë ¥ ìœ„ì— ìš”ì•½ ì •ë³´ í‘œì‹œ
                        const infoEl = document.createElement('div');
                        infoEl.className = 'fc-header-toolbar mt-2 mb-3';
                        infoEl.innerHTML = `
                            <div style="text-align:center; width:100%; font-weight:bold; padding:10px;">
                                ${dateInfo.view.title} - 
                                ìˆ˜ì…: <span style="color:#4CAF50">${monthIncome.toLocaleString()}ì›</span> | 
                                ì§€ì¶œ: <span style="color:#f44336">${monthExpense.toLocaleString()}ì›</span> | 
                                ì”ì•¡: <span style="color:${monthIncome - monthExpense >= 0 ? '#4CAF50' : '#f44336'}">${(monthIncome - monthExpense).toLocaleString()}ì›</span>
                            </div>
                        `;
                        
                        // ê¸°ì¡´ ìš”ì•½ ì •ë³´ê°€ ìˆìœ¼ë©´ ì œê±°
                        const existingInfo = calendarEl.querySelector('.fc-header-toolbar:not(:first-child)');
                        if (existingInfo) {
                            existingInfo.remove();
                        }
                        
                        // ìƒˆ ìš”ì•½ ì •ë³´ ì¶”ê°€
                        const header = calendarEl.querySelector('.fc-header-toolbar');
                        if (header) {
                            header.parentNode.insertBefore(infoEl, header.nextSibling);
                        }
                    }
                });
                
                // ë‹¬ë ¥ ë Œë”ë§
                calendar.render();
            } catch (e) {
                console.error("FullCalendar ì´ˆê¸°í™” ì˜¤ë¥˜:", e);
                calendarEl.innerHTML = '<div style="padding: 20px; text-align: center; color: #f44336;">ë‹¬ë ¥ì„ ë¡œë“œí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.<br>í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ë‹¤ë¥¸ íƒ­ì„ í´ë¦­í•œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</div>';
            }
        }
        
        function createCharts() {
            // ì°¨íŠ¸ ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
            const monthChart = document.getElementById('ab-month-summary');
            const categoryChart = document.getElementById('ab-category-summary');
            const methodChart = document.getElementById('ab-method-summary');
            
            if (!monthChart || !categoryChart || !methodChart) return;
            
            // ê¸°ì¡´ ì°¨íŠ¸ ì œê±°
            Chart.getChart(monthChart)?.destroy();
            Chart.getChart(categoryChart)?.destroy();
            Chart.getChart(methodChart)?.destroy();
            
            // ë°ì´í„° ì§‘ê³„
            const monthData = { income: 0, expense: 0 };
            const categoryData = {};
            const methodData = {};
            
            accountData.forEach(item => {
                // ì›”ë³„ ìˆ˜ì…/ì§€ì¶œ ì§‘ê³„
                monthData[item.type] += item.amount;
                
                // ì§€ì¶œ í•­ëª©ë§Œ ì¹´í…Œê³ ë¦¬ë³„ ì§‘ê³„
                if (item.type === 'expense') {
                    if (!categoryData[item.category]) {
                        categoryData[item.category] = 0;
                    }
                    categoryData[item.category] += item.amount;
                    
                    // ê²°ì œ ìˆ˜ë‹¨ë³„ ì§‘ê³„
                    if (!methodData[item.method]) {
                        methodData[item.method] = 0;
                    }
                    methodData[item.method] += item.amount;
                }
            });
            
            // ì›”ë³„ ìˆ˜ì…/ì§€ì¶œ ì°¨íŠ¸
            new Chart(monthChart, {
                type: 'bar',
                data: {
                    labels: ['ìˆ˜ì…', 'ì§€ì¶œ'],
                    datasets: [{
                        label: 'ê¸ˆì•¡',
                        data: [monthData.income, monthData.expense],
                        backgroundColor: ['#4CAF50', '#f44336']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'ìˆ˜ì…/ì§€ì¶œ ë¹„êµ'
                        }
                    }
                }
            });
            
            // ì¹´í…Œê³ ë¦¬ë³„ ì§€ì¶œ ì°¨íŠ¸
            new Chart(categoryChart, {
                type: 'pie',
                data: {
                    labels: Object.keys(categoryData),
                    datasets: [{
                        data: Object.values(categoryData),
                        backgroundColor: [
                            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',
                            '#FF9F40', '#8AC249', '#EA80FC', '#607D8B', '#E53935'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'ì¹´í…Œê³ ë¦¬ë³„ ì§€ì¶œ'
                        }
                    }
                }
            });
            
            // ê²°ì œ ìˆ˜ë‹¨ë³„ ì§€ì¶œ ì°¨íŠ¸
            new Chart(methodChart, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(methodData),
                    datasets: [{
                        data: Object.values(methodData),
                        backgroundColor: [
                            '#BCAAA4', '#90CAF9', '#FFE082', '#80DEEA', '#B0BEC5',
                            '#A5D6A7', '#F48FB1', '#CE93D8', '#FFF59D', '#FFAB91'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'ê²°ì œ ìˆ˜ë‹¨ë³„ ì§€ì¶œ'
                        }
                    }
                }
            });
        }

        /********** í™ˆí™”ë©´ ì„¤ì • ê¸°ëŠ¥ **********/
        function saveCustomHome() {
            const text = document.getElementById('text-input').value;
            const font = document.getElementById('font-select').value;
            const size = document.getElementById('font-size').value;
            const color = document.getElementById('font-color').value;
            const align = document.getElementById('text-align').value;
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            localStorage.setItem("home_text", text);
            localStorage.setItem("home_font", font);
            localStorage.setItem("home_size", size);
            localStorage.setItem("home_color", color);
            localStorage.setItem("home_align", align);
            
            // ì´ë¯¸ì§€ íŒŒì¼ ì²˜ë¦¬
            const imageFile = document.getElementById('image-upload').files[0];
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = e => {
                    localStorage.setItem("home_img", e.target.result);
                    localStorage.removeItem("home_video");
                    applyCustomHome();
                };
                reader.readAsDataURL(imageFile);
            }
            
            // ë¹„ë””ì˜¤ íŒŒì¼ ì²˜ë¦¬
            const videoFile = document.getElementById('video-upload').files[0];
            if (videoFile) {
                const reader = new FileReader();
                reader.onload = e => {
                    localStorage.setItem("home_video", e.target.result);
                    localStorage.removeItem("home_img");
                    applyCustomHome();
                };
                reader.readAsDataURL(videoFile);
            }
            
            // ì˜¤ë””ì˜¤ íŒŒì¼ ì²˜ë¦¬
            const audioFile = document.getElementById('audio-upload').files[0];
            if (audioFile) {
                const reader = new FileReader();
                reader.onload = e => {
                    localStorage.setItem("home_audio", e.target.result);
                    applyCustomHome();
                };
                reader.readAsDataURL(audioFile);
            }
            
            // ì„¤ì •ì„ ì¦‰ì‹œ ì ìš©
            applyCustomHome();
            
            alert("í™ˆí™”ë©´ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
        }

        function applyCustomHome() {
            const text = localStorage.getItem("home_text");
            const font = localStorage.getItem("home_font");
            const size = localStorage.getItem("home_size");
            const color = localStorage.getItem("home_color");
            const align = localStorage.getItem("home_align");
            const img = localStorage.getItem("home_img");
            const video = localStorage.getItem("home_video");
            const audioSrc = localStorage.getItem("home_audio");

            const el = document.getElementById("preview-text");
            if (el && text) {
                el.textContent = text;
                el.style.fontFamily = font || 'inherit';
                el.style.fontSize = size || 'inherit';
                el.style.color = color || 'inherit';
                el.style.textAlign = align || 'inherit';
            }

            // media-preview ìš”ì†Œë¥¼ ì°¾ê³  ì—†ìœ¼ë©´ ìƒì„±
            let media = document.getElementById("media-preview");
            if (!media) {
                // í—¤ë” ë‹¤ìŒì— media-preview ìš”ì†Œ ìƒì„±
                const header = document.querySelector('header');
                if (header && header.nextElementSibling) {
                    media = document.createElement('div');
                    media.id = 'media-preview';
                    media.style.textAlign = 'center';
                    media.style.margin = '20px 0';
                    header.parentNode.insertBefore(media, header.nextElementSibling);
                }
            }

            // ì´ë¯¸ì§€ë‚˜ ë¹„ë””ì˜¤ê°€ ì—†ìœ¼ë©´ media-previewë¥¼ í‘œì‹œí•˜ì§€ ì•ŠìŒ
            if (media) {
                if (video) {
                    media.innerHTML = '';
                    media.style.display = 'block';
                } else if (img) {
                    media.innerHTML = '<img src="' + img + '" alt="ì´ë¯¸ì§€" style="max-width:100%;">';
                    media.style.display = 'block';
                } else {
                    // ì´ë¯¸ì§€ë‚˜ ë¹„ë””ì˜¤ê°€ ì—†ìœ¼ë©´ ë¯¸ë””ì–´ ì˜ì—­ ìˆ¨ê¹€
                    media.innerHTML = '';
                    media.style.display = 'none';
                }
            }

            const bgm = document.getElementById("bgm");
            if (bgm && audioSrc) {
                bgm.src = audioSrc;
                bgm.play().catch(e => console.log("ì˜¤ë””ì˜¤ ìë™ ì¬ìƒ ì‹¤íŒ¨:", e));
            }
        }
        
        /********** ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ **********/
        function formatDate(dateString) {
            const date = new Date(dateString);
            return `${date.getFullYear()}ë…„ ${date.getMonth() + 1}ì›” ${date.getDate()}ì¼`;
        }
        
        function formatDateTime(dateString) {
            const date = new Date(dateString);
            return `${date.getFullYear()}ë…„ ${date.getMonth() + 1}ì›” ${date.getDate()}ì¼ ${date.getHours()}ì‹œ ${String(date.getMinutes()).padStart(2, '0')}ë¶„`;
        }

// í…ìŠ¤íŠ¸ ì—ë””í„° CSS ìŠ¤íƒ€ì¼
const textEditorCSS = `
/* í…ìŠ¤íŠ¸ ì—ë””í„° ìŠ¤íƒ€ì¼ */
.text-editor-container {
    border: 1px solid #ddd;
    border-radius: 5px;
    overflow: hidden;
    margin-bottom: 15px;
}

.text-editor-toolbar {
    background-color: #f5f5f5;
    padding: 8px;
    border-bottom: 1px solid #ddd;
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
}

.text-editor-toolbar button {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 3px;
    padding: 5px 8px;
    margin: 0;
    cursor: pointer;
    color: #333;
    font-size: 14px;
}

.text-editor-toolbar button:hover {
    background-color: #f0f0f0;
}

.text-editor-toolbar button.active {
    background-color: #e8e8e8;
    color: #000;
}

.text-editor-toolbar select {
    height: 30px;
    border: 1px solid #ddd;
    border-radius: 3px;
    background-color: #fff;
    padding: 0 5px;
    min-width: 100px;
}

.text-editor-toolbar .color-picker {
    height: 30px;
    width: 30px;
    padding: 0;
    border: 1px solid #ddd;
    border-radius: 3px;
    cursor: pointer;
}

.text-editor-content {
    min-height: 150px;
    padding: 10px;
    background-color: #fff;
    overflow-y: auto;
    line-height: 1.6;
}

.text-editor-content:focus {
    outline: none;
    box-shadow: 0 0 3px rgba(0, 0, 0, 0.2) inset;
}

/* íˆ´ë°” ê·¸ë£¹ ìŠ¤íƒ€ì¼ */
.toolbar-group {
    display: flex;
    align-items: center;
    gap: 5px;
    padding-right: 8px;
    margin-right: 8px;
    border-right: 1px solid #ddd;
}

.toolbar-group:last-child {
    border-right: none;
}

/* í°íŠ¸ ë¯¸ë¦¬ë³´ê¸° ìŠ¤íƒ€ì¼ */
.font-preview {
    font-size: 14px;
}

/* ê° í°íŠ¸ íŒ¨ë°€ë¦¬ì— ëŒ€í•œ ìŠ¤íƒ€ì¼ */
.arial { font-family: Arial, sans-serif; }
.nanum-gothic { font-family: "Nanum Gothic", "ë§‘ì€ ê³ ë”•", sans-serif; }
.malgun-gothic { font-family: "Malgun Gothic", "ë§‘ì€ ê³ ë”•", sans-serif; }
.gulim { font-family: "Gulim", sans-serif; }
.batang { font-family: "Batang", serif; }
.times { font-family: "Times New Roman", serif; }
.georgia { font-family: "Georgia", serif; }
.courier { font-family: "Courier New", monospace; }

/* ì›¹ í°íŠ¸ ë¡œë“œ */
@import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap');
`;

// ì¼ê¸°ì¥ê³¼ ë©”ëª¨ì¥ì— í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
function addTextEditorFunctionality() {
    // í…ìŠ¤íŠ¸ ì—ë””í„° CSS ìŠ¤íƒ€ì¼ ì¶”ê°€
    const styleElement = document.createElement('style');
    styleElement.textContent = textEditorCSS;
    document.head.appendChild(styleElement);
    
    // ì¼ê¸°ì¥ í…ìŠ¤íŠ¸ ì—ë””í„° ì¶”ê°€
    setupTextEditor('diaryContent', 'diary-editor', 6);
    
    // ë©”ëª¨ì¥ í…ìŠ¤íŠ¸ ì—ë””í„° ì¶”ê°€
    setupTextEditor('memoContent', 'memo-editor', 4);
    
    // í…ìŠ¤íŠ¸ ì—ë””í„° ì €ì¥ ì‹œ HTML ë‚´ìš©ì„ hidden inputì— ì €ì¥í•˜ë„ë¡ í›… ì¶”ê°€
    const originalSaveDiary = window.saveDiary;
    window.saveDiary = function() {
        const diaryEditor = document.getElementById('diary-editor');
        if (diaryEditor) {
            const diaryContent = document.getElementById('diaryContent');
            diaryContent.value = diaryEditor.innerHTML;
        }
        originalSaveDiary();
    };
    
    const originalSaveMemo = window.saveMemo;
    window.saveMemo = function() {
        const memoEditor = document.getElementById('memo-editor');
        if (memoEditor) {
            const memoContent = document.getElementById('memoContent');
            memoContent.value = memoEditor.innerHTML;
        }
        originalSaveMemo();
    };
    
    // ì¼ê¸°ì™€ ë©”ëª¨ ë¡œë“œ ì‹œ HTML ë‚´ìš©ì„ ì—ë””í„°ì— í‘œì‹œí•˜ë„ë¡ í›… ì¶”ê°€
    const originalEditDiary = window.editDiary;
    window.editDiary = function(id) {
        originalEditDiary(id);
        const diary = diaries.find(d => d.id === id);
        if (diary && document.getElementById('diary-editor')) {
            document.getElementById('diary-editor').innerHTML = diary.content;
        }
    };
    
    const originalEditMemo = window.editMemo;
    window.editMemo = function(id) {
        originalEditMemo(id);
        const memo = memos.find(m => m.id === id);
        if (memo && document.getElementById('memo-editor')) {
            document.getElementById('memo-editor').innerHTML = memo.content;
        }
    };
}

// í…ìŠ¤íŠ¸ ì—ë””í„° ì„¤ì • í•¨ìˆ˜
function setupTextEditor(textareaId, editorId, rows) {
    const textarea = document.getElementById(textareaId);
    if (!textarea) return;
    
    // textareaë¥¼ ìˆ¨ê¸°ê³  ì—ë””í„° ì»¨í…Œì´ë„ˆ ìƒì„±
    textarea.style.display = 'none';
    
    const editorContainer = document.createElement('div');
    editorContainer.className = 'text-editor-container';
    textarea.parentNode.insertBefore(editorContainer, textarea);
    
    // íˆ´ë°” ìƒì„±
    const toolbar = document.createElement('div');
    toolbar.className = 'text-editor-toolbar';
    
    // í°íŠ¸ ìŠ¤íƒ€ì¼ ê·¸ë£¹
    const styleGroup = document.createElement('div');
    styleGroup.className = 'toolbar-group';
    
    // ë³¼ë“œ ë²„íŠ¼
    const boldBtn = document.createElement('button');
    boldBtn.innerHTML = '<b>B</b>';
    boldBtn.title = 'êµµê²Œ';
    boldBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('bold', false, null); 
    };
    
    // ì´íƒ¤ë¦­ ë²„íŠ¼
    const italicBtn = document.createElement('button');
    italicBtn.innerHTML = '<i>I</i>';
    italicBtn.title = 'ê¸°ìš¸ì„';
    italicBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('italic', false, null); 
    };
    
    // ë°‘ì¤„ ë²„íŠ¼
    const underlineBtn = document.createElement('button');
    underlineBtn.innerHTML = '<u>U</u>';
    underlineBtn.title = 'ë°‘ì¤„';
    underlineBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('underline', false, null); 
    };
    
    // ì·¨ì†Œì„  ë²„íŠ¼
    const strikeBtn = document.createElement('button');
    strikeBtn.innerHTML = '<s>S</s>';
    strikeBtn.title = 'ì·¨ì†Œì„ ';
    strikeBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('strikethrough', false, null); 
    };
    
    styleGroup.appendChild(boldBtn);
    styleGroup.appendChild(italicBtn);
    styleGroup.appendChild(underlineBtn);
    styleGroup.appendChild(strikeBtn);
    
    // ì •ë ¬ ê·¸ë£¹
    const alignGroup = document.createElement('div');
    alignGroup.className = 'toolbar-group';
    
    // ì™¼ìª½ ì •ë ¬ ë²„íŠ¼
    const alignLeftBtn = document.createElement('button');
    alignLeftBtn.innerHTML = 'â—€ ì™¼ìª½';
    alignLeftBtn.title = 'ì™¼ìª½ ì •ë ¬';
    alignLeftBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('justifyLeft', false, null); 
    };
    
    // ê°€ìš´ë° ì •ë ¬ ë²„íŠ¼
    const alignCenterBtn = document.createElement('button');
    alignCenterBtn.innerHTML = 'â–  ê°€ìš´ë°';
    alignCenterBtn.title = 'ê°€ìš´ë° ì •ë ¬';
    alignCenterBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('justifyCenter', false, null); 
    };
    
    // ì˜¤ë¥¸ìª½ ì •ë ¬ ë²„íŠ¼
    const alignRightBtn = document.createElement('button');
    alignRightBtn.innerHTML = 'â–¶ ì˜¤ë¥¸ìª½';
    alignRightBtn.title = 'ì˜¤ë¥¸ìª½ ì •ë ¬';
    alignRightBtn.onclick = function(e) { 
        e.preventDefault(); 
        document.getElementById(editorId).focus();
        document.execCommand('justifyRight', false, null); 
    };
    
    alignGroup.appendChild(alignLeftBtn);
    alignGroup.appendChild(alignCenterBtn);
    alignGroup.appendChild(alignRightBtn);
    
    // í°íŠ¸ ê·¸ë£¹
    const fontGroup = document.createElement('div');
    fontGroup.className = 'toolbar-group';
    
    // í°íŠ¸ ì¢…ë¥˜ ì„ íƒê¸° (ê°œì„ ëœ ë²„ì „)
    const fontSelector = document.createElement('select');
    fontSelector.title = 'ê¸€ê¼´';
    fontSelector.id = editorId + '-font-selector';
    fontSelector.style.minWidth = '120px'; // ì¶©ë¶„í•œ ë„ˆë¹„ í™•ë³´
    
    // í°íŠ¸ ì„ íƒ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ìˆ˜ì •
    fontSelector.onchange = function() {
        applyFontToEditor(editorId, this.value);
    };
    
    // í°íŠ¸ ì˜µì…˜ - CSS í´ë˜ìŠ¤ì™€ í•¨ê»˜ ì •ì˜
    const fontOptions = [
        { value: 'Arial, sans-serif', text: 'Arial', className: 'arial' },
        { value: '"Nanum Gothic", "ë§‘ì€ ê³ ë”•", sans-serif', text: 'ë‚˜ëˆ” ê³ ë”•', className: 'nanum-gothic' },
        { value: '"Malgun Gothic", "ë§‘ì€ ê³ ë”•", sans-serif', text: 'ë§‘ì€ ê³ ë”•', className: 'malgun-gothic' },
        { value: '"Gulim", sans-serif', text: 'êµ´ë¦¼', className: 'gulim' },
        { value: '"Batang", serif', text: 'ë°”íƒ•', className: 'batang' },
        { value: '"Times New Roman", serif', text: 'Times New Roman', className: 'times' },
        { value: '"Georgia", serif', text: 'Georgia', className: 'georgia' },
        { value: '"Courier New", monospace', text: 'Courier New', className: 'courier' }
    ];
    
    // ì˜µì…˜ ì¶”ê°€ - í°íŠ¸ ë¯¸ë¦¬ë³´ê¸°ì™€ í•¨ê»˜
    fontOptions.forEach(option => {
        const opt = document.createElement('option');
        opt.value = option.value;
        opt.textContent = option.text;
        opt.className = 'font-preview ' + option.className;
        // ê¸°ë³¸ê°’ ì„¤ì • (Arialë¡œ ì„¤ì •)
        if (option.text === 'Arial') opt.selected = true;
        fontSelector.appendChild(opt);
    });
    
    // í°íŠ¸ í¬ê¸° ì„ íƒê¸°
    const sizeSelector = document.createElement('select');
    sizeSelector.title = 'ê¸€ì í¬ê¸°';
    sizeSelector.id = editorId + '-size-selector';
    
    // í¬ê¸° ì„ íƒ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ìˆ˜ì •
    sizeSelector.onchange = function() {
        document.getElementById(editorId).focus();
        document.execCommand('fontSize', false, this.value);
        
        // ì¶”ê°€ì ì¸ ìŠ¤íƒ€ì¼ ì ìš© (ì¼ë¶€ ë¸Œë¼ìš°ì €ì—ì„œ ë” ì˜ ì‘ë™)
        const sizeStyles = {
            '1': '10px',
            '2': '13px',
            '3': '16px',
            '4': '18px',
            '5': '24px',
            '6': '32px',
            '7': '48px'
        };
        
        const selection = window.getSelection();
        if (selection.rangeCount > 0) {
            const fontElements = document.querySelectorAll(`font[size="${this.value}"]`);
            fontElements.forEach(el => {
                el.style.fontSize = sizeStyles[this.value];
            });
        }
    };
    
    const sizeOptions = [
        { value: '1', text: 'ì•„ì£¼ ì‘ê²Œ' },
        { value: '2', text: 'ì‘ê²Œ' },
        { value: '3', text: 'ë³´í†µ' },
        { value: '4', text: 'í¬ê²Œ' },
        { value: '5', text: 'ë” í¬ê²Œ' },
        { value: '6', text: 'ì•„ì£¼ í¬ê²Œ' },
        { value: '7', text: 'ìµœëŒ€ í¬ê²Œ' }
    ];
    
    sizeOptions.forEach(option => {
        const opt = document.createElement('option');
        opt.value = option.value;
        opt.textContent = option.text;
        if (option.value === '3') opt.selected = true;
        sizeSelector.appendChild(opt);
    });
    
    fontGroup.appendChild(fontSelector);
    fontGroup.appendChild(sizeSelector);
    
    // ìƒ‰ìƒ ê·¸ë£¹
    const colorGroup = document.createElement('div');
    colorGroup.className = 'toolbar-group';
    
    // ê¸€ì ìƒ‰ìƒ ì„ íƒê¸°
    const colorPicker = document.createElement('input');
    colorPicker.type = 'color';
    colorPicker.className = 'color-picker';
    colorPicker.title = 'ê¸€ì ìƒ‰ìƒ';
    colorPicker.value = '#000000';
    colorPicker.onchange = function() { 
        document.getElementById(editorId).focus();
        document.execCommand('foreColor', false, this.value); 
    };
    
    // ë°°ê²½ ìƒ‰ìƒ ì„ íƒê¸°
    const bgColorPicker = document.createElement('input');
    bgColorPicker.type = 'color';
    bgColorPicker.className = 'color-picker';
    bgColorPicker.title = 'ë°°ê²½ ìƒ‰ìƒ';
    bgColorPicker.value = '#ffffff';
    bgColorPicker.onchange = function() { 
        document.getElementById(editorId).focus();
        document.execCommand('hiliteColor', false, this.value); 
    };
    
    colorGroup.appendChild(colorPicker);
    colorGroup.appendChild(bgColorPicker);
    
    // ëª¨ë“  ê·¸ë£¹ì„ íˆ´ë°”ì— ì¶”ê°€
    toolbar.appendChild(styleGroup);
    toolbar.appendChild(alignGroup);
    toolbar.appendChild(fontGroup);
    toolbar.appendChild(colorGroup);
    
    // í¸ì§‘ ì˜ì—­ ìƒì„±
    const editorContent = document.createElement('div');
    editorContent.className = 'text-editor-content';
    editorContent.id = editorId;
    editorContent.contentEditable = 'true';
    editorContent.style.minHeight = (rows * 24) + 'px'; // ê¸°ì¡´ textareaì˜ ì¤„ ìˆ˜ì™€ ë¹„ìŠ·í•œ ë†’ì´
    editorContent.innerHTML = textarea.value;
    
    // ê¸°ë³¸ ê¸€ê¼´ ì„¤ì • (Arial)
    editorContent.style.fontFamily = 'Arial, sans-serif';
    
    // ì—ë””í„° ì»¨í…Œì´ë„ˆì— íˆ´ë°”ì™€ í¸ì§‘ ì˜ì—­ ì¶”ê°€
    editorContainer.appendChild(toolbar);
    editorContainer.appendChild(editorContent);
    
    // í¸ì§‘ ë‚´ìš© ë³€ê²½ ì‹œ textarea ê°’ ì—…ë°ì´íŠ¸
    editorContent.oninput = function() {
        textarea.value = this.innerHTML;
    };
}

// ê¸€ê¼´ ì ìš© helper í•¨ìˆ˜
function applyFontToEditor(editorId, fontValue) {
    // ì—ë””í„°ì— í¬ì»¤ìŠ¤ ì£¼ê¸°
    const editor = document.getElementById(editorId);
    editor.focus();
    
    // ì„ íƒëœ í…ìŠ¤íŠ¸ê°€ ìˆëŠ”ì§€ í™•ì¸
    const selection = window.getSelection();
    const hasSelection = selection.toString().length > 0;
    
    try {
        if (hasSelection) {
            // ì„ íƒëœ í…ìŠ¤íŠ¸ê°€ ìˆìœ¼ë©´ fontName ëª…ë ¹ ì‹¤í–‰
            document.execCommand('fontName', false, fontValue);
        } else {
            // 1. í˜„ì¬ ì»¤ì„œ ìœ„ì¹˜ì˜ í…ìŠ¤íŠ¸ ë…¸ë“œ ì°¾ê¸°
            const range = selection.getRangeAt(0);
            const startNode = range.startContainer;
            
            // 2. ë¶€ëª¨ ìš”ì†Œì— ì§ì ‘ ìŠ¤íƒ€ì¼ ì ìš© (í…ìŠ¤íŠ¸ ë…¸ë“œì˜ ê²½ìš°)
            if (startNode.nodeType === Node.TEXT_NODE) {
                // í˜„ì¬ ë¶€ëª¨ ìš”ì†Œ ì°¾ê¸°
                let parentElement = startNode.parentNode;
                
                // spanìœ¼ë¡œ ê°ì‹¸ê³  ìŠ¤íƒ€ì¼ ì ìš©
                const span = document.createElement('span');
                span.style.fontFamily = fontValue;
                
                // í˜„ì¬ í…ìŠ¤íŠ¸ ë…¸ë“œë¥¼ ìƒˆ spanìœ¼ë¡œ ê°ì‹¸ê¸°
                const newRange = document.createRange();
                newRange.selectNode(startNode);
                newRange.surroundContents(span);
            } else {
                // ì—ë””í„° ì „ì²´ì— ì ìš©
                editor.style.fontFamily = fontValue;
                
                // ë˜ëŠ” ìƒˆë¡œìš´ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•  ìœ„ì¹˜ë¥¼ ë§ˆí¬í•˜ê³  ìŠ¤íŒ¬ìœ¼ë¡œ ê°ì‹¸ê¸°
                const span = document.createElement('span');
                span.style.fontFamily = fontValue;
                span.innerHTML = 'â€‹'; // ì˜ ë„ˆë¹„ ê³µë°± ë¬¸ì
                
                range.insertNode(span);
                range.setStart(span, 0);
                range.setEnd(span, 1);
                selection.removeAllRanges();
                selection.addRange(range);
            }
        }
        
        // font íƒœê·¸ì— ì§ì ‘ ìŠ¤íƒ€ì¼ ì¶”ê°€í•˜ì—¬ ê°•í™”
        setTimeout(() => {
            const fontElements = editor.querySelectorAll(`font[face="${fontValue}"]`);
            fontElements.forEach(el => {
                el.style.fontFamily = fontValue;
            });
        }, 10);
    } catch (e) {
        console.error('í°íŠ¸ ì ìš© ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', e);
        // ì˜ˆë¹„ ë°©ë²•: ì„ íƒ ì˜ì—­ì´ ì—†ê±°ë‚˜ ë¬¸ì œê°€ ìˆìœ¼ë©´ ì „ì²´ ì ìš©
        editor.style.fontFamily = fontValue;
    }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ í…ìŠ¤íŠ¸ ì—ë””í„° ê¸°ëŠ¥ ì¶”ê°€
document.addEventListener('DOMContentLoaded', function() {
    addTextEditorFunctionality();
});
    </script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    loadInitialData();
});
</script>

</body></html>
</div>
<script>
  function checkPassword(event) {
  event.preventDefault();
    const input = document.getElementById('password').value;
    const errorMsg = document.getElementById('error-msg');
    if (input === 'sik282') {
      document.getElementById('password-screen').style.display = 'none';
      document.getElementById('main-content').style.display = 'block';
    } else {
      errorMsg.textContent = 'ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤';
    }
  }
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    loadInitialData();
});
</script>

</body>
</html>
